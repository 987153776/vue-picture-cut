(function(t){function e(e){for(var o,s,r=e[0],c=e[1],h=e[2],u=0,v=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(v.length)v.shift()();return n.push.apply(n,h||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],o=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},a={app:0},n=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var l=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"3aa3":function(t,e,i){},"4cb5":function(t,e,i){},"55c6":function(t,e,i){},"57f5":function(t,e,i){"use strict";var o=i("55c6"),a=i.n(o);a.a},"5c0b":function(t,e,i){"use strict";var o=i("9c0c"),a=i.n(o);a.a},"9c0c":function(t,e,i){},b3c8:function(t,e,i){"use strict";var o=i("4cb5"),a=i.n(o);a.a},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"link-box"},[i("a",{attrs:{href:"https://github.com/987153776/vue-picture-cut",target:"_blank",type:"primary"}},[i("svg",{staticClass:"octicon octicon-mark-github v-align-middle",attrs:{height:"28",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})]),i("span",[t._v("github")])]),t._m(0),i("div",{staticClass:"language"},[i("span",{class:{active:"EN"===t.language},on:{click:function(e){t.language="EN"}}},[t._v("English")]),i("i"),i("span",{class:{active:"ZN"===t.language},on:{click:function(e){t.language="ZN"}}},[t._v("ä¸­æ–‡")])])]),i("vue-picture-cut",{ref:"pictureCut",staticClass:"cut",attrs:{src:t.src,"init-angle":t.form.initAngle,"msk-option":t.mskOption,"background-color":t.form.backgroundColor}},[i("vue-picture-cut-menu",{attrs:{slot:"menu","max-pixel":t.form.maxPixel,"encoder-options":t.form.encoderOptions,format:t.form.format,theme:t.form.menuTheme,"size-auto-name":t.config(t.language,"auto"),"size-raw-name":t.config(t.language,"raw"),"menu-rotate-name":t.config(t.language,"Rotate"),"cancel-name":t.config(t.language,"Cancel"),"confirm-name":t.config(t.language,"Ok")},on:{"on-change":t.cutChange},slot:"menu"})],1),i("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:t.form,"label-width":"140px",inline:""}},[i("el-form-item",{attrs:{label:t.config(t.language,"preview")+":","label-width":"70px"}},[i("a",{staticClass:"download-img",style:{"background-image":"url("+t.newSrc+")"},attrs:{download:"vue-picture-cut."+t.form.format.replace("image/",""),href:t.base64}},[t._v(" "+t._s(t.config(t.language,"download"))+" ")])]),i("el-form-item",{attrs:{label:"ðŸ™„"+t.config(t.language,"Select Picture")+":"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:"image/*","show-file-list":!1,"before-upload":t.inputChange}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.config(t.language,"Select")))])],1)],1),i("el-form-item",{attrs:{label:"ðŸ˜±"+t.config(t.language,"Canvas bgColor")+":"}},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.backgroundColor,callback:function(e){t.$set(t.form,"backgroundColor",e)},expression:"form.backgroundColor"}})],1),i("el-form-item",{attrs:{label:"ðŸ˜´"+t.config(t.language,"Mask color")+":"}},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.maskColor,callback:function(e){t.$set(t.form,"maskColor",e)},expression:"form.maskColor"}})],1),i("el-form-item",{attrs:{label:"ðŸ¤”"+t.config(t.language,"CropBox color")+":"}},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.maskBorderColor,callback:function(e){t.$set(t.form,"maskBorderColor",e)},expression:"form.maskBorderColor"}})],1),i("el-form-item",{attrs:{label:"ðŸ¤—"+t.config(t.language,"Menu theme")+":","label-width":"124px"}},[i("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:t.config(t.language,"Please select")},model:{value:t.form.menuTheme,callback:function(e){t.$set(t.form,"menuTheme",e)},expression:"form.menuTheme"}},[i("el-option",{attrs:{label:"default",value:"default"}}),i("el-option",{attrs:{label:"dark",value:"dark"}}),i("el-option",{attrs:{label:"gray",value:"gray"}})],1)],1),i("el-form-item",{attrs:{label:"ðŸ˜"+t.config(t.language,"CropBox shape")+":"}},[i("el-radio-group",{model:{value:t.form.isRound,callback:function(e){t.$set(t.form,"isRound",e)},expression:"form.isRound"}},[i("el-radio",{attrs:{label:!1}},[t._v(t._s(t.config(t.language,"Rectangle")))]),i("el-radio",{attrs:{label:!0}},[t._v(t._s(t.config(t.language,"Ellipse")))])],1)],1),i("el-form-item",{attrs:{label:"ðŸ˜‚"+t.config(t.language,"CropBox size")+":"}},[i("el-radio-group",{model:{value:t.form.resize,callback:function(e){t.$set(t.form,"resize",e)},expression:"form.resize"}},[i("el-radio",{attrs:{label:!1}},[t._v(t._s(t.config(t.language,"Unchangeable")))]),i("el-radio",{attrs:{label:!0}},[t._v(t._s(t.config(t.language,"Changeable")))])],1)],1),i("el-form-item",{attrs:{label:"ðŸ˜‰"+t.config(t.language,"Scaling factor")+":"}},[i("el-input-number",{attrs:{min:0,step:.05},model:{value:t.form.zoom,callback:function(e){t.$set(t.form,"zoom",e)},expression:"form.zoom"}}),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$refs["pictureCut"].scale(t.form.zoom)}}},[t._v(t._s(t.config(t.language,"Perform zoom")))])],1),i("el-form-item",{attrs:{label:"ðŸ˜Ž"+t.config(t.language,"Initial angle")+":"}},[i("el-input-number",{attrs:{placeholder:"auto"},model:{value:t.form.initAngle,callback:function(e){t.$set(t.form,"initAngle",e)},expression:"form.initAngle"}})],1),i("el-form-item",{attrs:{label:"ðŸ˜™"+t.config(t.language,"Cropped width")+":"}},[i("el-input-number",{attrs:{min:1,placeholder:"1"},model:{value:t.form.width,callback:function(e){t.$set(t.form,"width",e)},expression:"form.width"}})],1),i("el-form-item",{attrs:{label:"ðŸ˜ª"+t.config(t.language,"Cropped height")+":"}},[i("el-input-number",{attrs:{min:1,placeholder:"1"},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",e)},expression:"form.height"}})],1),i("el-form-item",{attrs:{label:"ðŸ¤‘"+t.config(t.language,"Max pixels")+":","label-width":"124px"}},[i("el-input-number",{attrs:{min:1,placeholder:"auto"},model:{value:t.form.maxPixel,callback:function(e){t.$set(t.form,"maxPixel",e)},expression:"form.maxPixel"}})],1),i("el-form-item",{attrs:{label:"ðŸ‘‘"+t.config(t.language,"compressibility")+":"}},[i("el-input-number",{attrs:{min:0,max:1,step:.1,placeholder:"0.8"},model:{value:t.form.encoderOptions,callback:function(e){t.$set(t.form,"encoderOptions",e)},expression:"form.encoderOptions"}})],1),i("el-form-item",{attrs:{label:"ðŸ˜"+t.config(t.language,"Export format")+":","label-width":"124px"}},[i("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:t.config(t.language,"Please select")},model:{value:t.form.format,callback:function(e){t.$set(t.form,"format",e)},expression:"form.format"}},[i("el-option",{attrs:{label:"jpeg",value:"image/jpeg"}}),i("el-option",{attrs:{label:"png",value:"image/png"}})],1)],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{href:"https://gitee.com/light-year/vue-picture-cut",target:"_blank",type:"primary"}},[i("img",{attrs:{height:"28",width:"95",src:"https://gitee.com/static/images/logo-black.svg?t=158106664"}})])}],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("d4ec")),r=i("bee2"),c=i("262e"),h=i("2caf"),l=i("9ab4"),u=i("60a3"),v={ZN:{download:"ç‚¹å‡»ä¸‹è½½","Select Picture":"é€‰æ‹©å›¾ç‰‡",Select:"é€‰æ‹©","Please select":"è¯·é€‰æ‹©","Perform zoom":"æ‰§è¡Œç¼©æ”¾",Rectangle:"çŸ©å½¢",Ellipse:"æ¤­åœ†",Unchangeable:"ä¸å¯æ”¹å˜",Changeable:"å¯æ”¹å˜","Canvas bgColor":"ç”»å¸ƒèƒŒæ™¯è‰²","Mask color":"é®ç½©é¢œè‰²","CropBox color":"è£å‰ªæ¡†é¢œè‰²","Menu theme":"èœå•æ ä¸»é¢˜","CropBox shape":"è£å‰ªæ¡†å½¢çŠ¶","CropBox size":"è£å‰ªæ¡†å°ºå¯¸","Scaling factor":"ç¼©æ”¾ç³»æ•°","Initial angle":"åˆå§‹è§’åº¦","Cropped width":"è£å‰ªæ¯”ä¾‹å®½","Cropped height":"è£å‰ªæ¯”ä¾‹é«˜","Max pixels":"è£å‰ªé•¿è¾¹åƒç´ ",compressibility:"å›¾ç‰‡åŽ‹ç¼©çŽ‡","Export format":"è£å‰ªå›¾ç‰‡æ ¼å¼",preview:"é¢„è§ˆ",auto:"è‡ªç”±",raw:"åŽŸå§‹",Rotate:"æ—‹è½¬",Cancel:"å–æ¶ˆ",Ok:"ç¡®å®š"}},d=function(t,e){return v[t]&&v[t][e]||e},m=function(t){Object(c["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.config=d,t.language="EN",t.src="./demo.jpg",t.blob=null,t.base64=null,t.form={backgroundColor:void 0,maskColor:void 0,maskBorderColor:void 0,menuTheme:"default",isRound:!0,resize:!0,rotateControl:!0,zoom:.96,initAngle:void 0,width:4,height:5,maxPixel:void 0,encoderOptions:.8,format:"image/jpeg"},t}return Object(r["a"])(i,[{key:"inputChange",value:function(t){return this.src=URL.createObjectURL(t),!1}},{key:"cutChange",value:function(t){var e=t.blob,i=t.base64;this.blob=e,this.base64=i}},{key:"mskOption",get:function(){return{width:this.form.width||1,height:this.form.height||1,isRound:this.form.isRound,resize:this.form.resize,color:this.form.maskColor,borderColor:this.form.maskBorderColor}}},{key:"newSrc",get:function(){return this.blob?URL.createObjectURL(this.blob):""}}]),i}(u["h"]);m=Object(l["a"])([u["a"]],m);var f=m,g=f,p=(i("5c0b"),i("2877")),y=Object(p["a"])(g,a,n,!1,null,null,null),b=y.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-picture-cut",class:{_default:!t.backgroundColor},style:{"background-color":t.backgroundColor||"#fff"}},[i("div",{ref:"main",staticClass:"vue-picture-cut_main",style:[t.hasMenu||{bottom:"50px"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"vue-picture-cut_main-loading"},[t._v("loading...")]),i("vue-picture-cut-canvas",{attrs:{loading:t.loading,angle:t.initAngle},on:{"update:loading":function(e){t.loading=e}}}),t._t("default",[i("vue-picture-cut-mask",t._b({},"vue-picture-cut-mask",t.mskOption,!1))])],2),i("div",{staticClass:"vue-picture-cut_menu-box",style:[t.hasMenu||{height:"50px"}]},[t._t("menu",[i("div",{staticClass:"vue-picture-cut_default-menu"},[t.rotateControl?i("div",{staticClass:"vue-picture-cut_slider"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),i("div",{staticClass:"vue-picture-cut_slider-box"},[i("div",{staticClass:"vue-picture-cut_slider-box-bar",style:{left:100*t.sliderAngle/361+50+"%"}},[i("div",{staticClass:"vue-picture-cut_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"Â° ")])])])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.src,expression:"src"}],staticClass:"vue-picture-cut_button",on:{click:t.sureCut}},[t._v("ç¡®å®š")])])])],2)])},k=[],_=(i("a9e3"),i("4160"),i("a630"),i("d81d"),i("4ec9"),i("159b"),i("b85c")),R=(i("a15b"),i("c19f"),i("b0c0"),i("ac1f"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),document.createElement("canvas"));R.style.display="none";var x=R.getContext("2d");function O(t,e,i,o,a){var n=.5*o,s=.5*a,r=.5522848,c=n*r,h=s*r;t.moveTo(e-n,i),t.bezierCurveTo(e-n,i-h,e-c,i-s,e,i-s),t.bezierCurveTo(e+c,i-s,e+n,i-h,e+n,i),t.bezierCurveTo(e+n,i+h,e+c,i+s,e,i+s),t.bezierCurveTo(e-c,i+s,e-n,i+h,e-n,i)}function j(t,e,i){var o=Math.sin(i*Math.PI/180),a=Math.cos(i*Math.PI/180),n=Math.pow(t,2)*Math.pow(o,2)+Math.pow(e,2)*Math.pow(a,2),s=2*(Math.pow(t,2)-Math.pow(e,2))*o*a,r=Math.pow(t,2)*Math.pow(a,2)+Math.pow(e,2)*Math.pow(o,2),c=-Math.pow(t,2)*Math.pow(e,2);return{A:n,B:s,C:r,F:c}}function C(t,e,i,o){var a=Math.pow(e,2)-4*t*i,n=Math.sqrt(4*i*o/a),s=Math.sqrt(4*t*o/a);return{x:-Math.abs(n),y:-Math.abs(s),w:2*Math.abs(n),h:2*Math.abs(s)}}function E(t,e,i){var o=Math.sqrt(t*t+e*e),a=Math.atan2(t,e),n=i*Math.PI/180+a;return{x:o*Math.sin(n),y:o*Math.cos(n)}}function M(t,e){var i=new Uint8Array(t),o=i.length,a=new Array(o);while(o--)a[o]=String.fromCharCode(i[o]);var n=a.join(""),s=window.btoa(n);return"data:"+e+";base64,"+s}function P(t){return new Promise((function(e,i){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){if(200===this.status){var t=o.response,a=new FileReader;a.addEventListener("loadend",(function(o){o.target?"string"===typeof o.target.result?e(o.target.result):null!==o.target.result?M(o.target.result,t.type):i():i()})),a.readAsDataURL(t)}else i()},o.onerror=function(t){i(t)},o.send()}))}var S={rotatePoint:E,loadCrossDomainImg:P,cloneJSON:function(t){return JSON.parse(JSON.stringify(t))},loadImg:function(t){return new Promise((function(e,i){var o=new Image;o.addEventListener("load",(function(){e&&e(o)})),o.addEventListener("error",(function(){i&&i(o)})),o.src=t}))},clipBy:function(t,e,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg",s=o.x,r=o.y,c=o.w,h=o.h,l=o.r,u=o.sH,v=o.sV;return R.width=e,R.height=i,x.clearRect(0,0,e,i),x.save(),x.translate(e/2,i/2),"image/jpeg"!==n&&"image/jpg"!==n||(x.fillStyle="#fff",x.fillRect(-e/2,-i/2,e,i)),l/360&&x.rotate(-l*Math.PI/180),x.scale(u?-1:1,v?-1:1),x.drawImage(t,0,0,t.width,t.height,s,r,c,h),x.scale(u?1:-1,v?1:-1),x.translate(-e/2,-i/2),x.restore(),R.toDataURL(n,a)},clipByRound:function(t,e,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg",s=o.x,r=o.y,c=o.w,h=o.h,l=o.r,u=o.sH,v=o.sV;return R.width=e,R.height=i,x.clearRect(0,0,e,i),x.save(),x.translate(e/2,i/2),"image/jpeg"!==n&&"image/jpg"!==n||(x.fillStyle="#fff",x.fillRect(-e/2,-i/2,e,i)),x.beginPath(),O(x,0,0,e,i),x.clip(),x.closePath(),l/360&&x.rotate(-l*Math.PI/180),x.scale(u?-1:1,v?-1:1),x.drawImage(t,0,0,t.width,t.height,s,r,c,h),x.scale(u?1:-1,v?1:-1),x.translate(-e/2,-i/2),x.restore(),R.toDataURL(n,a)},clipByMax:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.width>e||t.height>e){var o=t.width/t.height,a=t.width,n=t.height;t.width>e&&(a=e,n=a/o),t.height>e&&(n=e,a=n*o);var s={x:-a/2,y:-n/2,w:a,h:n,r:0,sV:!1,sH:!1},r=this.clipBy(t,a,n,s,i);return{src:r,file:this.base64ToBlob(r)}}},base64ToBlob:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",i=atob(t.split(",")[1]),o=new ArrayBuffer(i.length),a=new Uint8Array(o),n=0,s=i.length;n<s;n++)a[n]=255&i.charCodeAt(n);var r=null;try{r=new Blob([a],{type:e})}catch(u){var c=window,h=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder;if("TypeError"===u.name&&h){var l=new h;l.append(a.buffer),r=l.getBlob(e)}else"InvalidStateError"===u.name&&(r=new Blob([o],{type:e}))}return r},doubleTouche:function(t,e){if(void 0===e)return{core:{x:t.x,y:t.y},length:0,lengthX:0,lengthY:0,angle:0};var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},o=e.x-t.x,a=e.y-t.y,n=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),s=180*Math.acos(o/n)/Math.PI;return{core:i,length:n,lengthX:o,lengthY:a,angle:s}},getEllipseRectByRect:function(t,e,i){if(!(i/180))return{x:-t/2,y:-e/2,w:t,h:e};var o=t/2,a=e/2,n=j(o,a,i),s=n.A,r=n.B,c=n.C,h=n.F;return C(s,r,c,h)},getRectByRect:function(t,e,i){if(!(i/180))return{x:-t/2,y:-e/2,w:t,h:e};var o=E(-t/2,-e/2,i),a=E(t/2,-e/2,i),n=Math.max(Math.abs(o.x),Math.abs(a.x)),s=Math.max(Math.abs(o.y),Math.abs(a.y));return{x:-n,y:-s,w:n+n,h:s+s}}},L=function(){function t(){Object(s["a"])(this,t),this.debug=!1,this.eventList=new Map,this.priorityEvent=null,this.wheelTime=0,this.wheelTimeOut=0,this.wheelstatus=!1}return Object(r["a"])(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;this.root=t,this.width=t.offsetWidth,this.height=t.offsetHeight,this.drawWidth=Math.floor(this.width*e),this.drawHeight=Math.floor(this.height*e),this.magnification=e,this.core={x:Math.floor(this.drawWidth/2),y:Math.floor(this.drawHeight/2)},this._eventInit()}},{key:"addEventList",value:function(t){this.eventList.set(t.className,t)}},{key:"getEventList",value:function(t){var e=this.eventList.get(t);return e||null}},{key:"deleteEventList",value:function(t){this.eventList.delete(t)}},{key:"setPriority",value:function(t){this.priorityEvent||(this.priorityEvent=t)}},{key:"getPriority",value:function(){return this.priorityEvent?this.priorityEvent:null}},{key:"deletePriority",value:function(t){this.priorityEvent&&this.priorityEvent.className===t&&(this.priorityEvent=null)}},{key:"_eventInit",value:function(){var t=this;this.root.addEventListener("touchstart",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchStart(o)}),!1),this.root.addEventListener("touchend",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchEnd(o)}),!1),this.root.addEventListener("touchmove",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchMove(o)}),!1),this.root.addEventListener("mousedown",(function(e){var i=e||window.event;i.preventDefault(),t._mouseDown(i)}),!1),this.root.addEventListener("mouseup",(function(e){var i=e||window.event;i.preventDefault(),t._mouseUp(i)}),!1),this.root.addEventListener("mouseleave",(function(e){var i=e||window.event;i.preventDefault(),t._mouseUp(i)}),!1),this.root.addEventListener("mousemove",(function(e){var i=e||window.event;i.preventDefault(),t._mouseMove(i)}),!1),this.root.addEventListener("mousewheel",(function(e){var i=e||window.event;i.preventDefault();var o=i.wheelDelta||i.detail;t._mouseWheel(o,{x:i.offsetX*t.magnification-t.core.x,y:i.offsetY*t.magnification-t.core.y})}),!1)}},{key:"_touchStart",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));if(this.priorityEvent)this.priorityEvent.touchStart(S.cloneJSON(i));else{var o,a=[],n=Object(_["a"])(this.eventList.values());try{for(n.s();!(o=n.n()).done;){var s=o.value;if(s.touchStart(S.cloneJSON(i)),this.priorityEvent)break;a.push(s)}}catch(r){n.e(r)}finally{n.f()}this.priorityEvent&&a.forEach((function(t){return t.touchEnd(S.cloneJSON(i))}))}}},{key:"_touchEnd",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchEnd(S.cloneJSON(i)):this.eventList.forEach((function(t){return t.touchEnd(S.cloneJSON(i))}))}},{key:"_touchMove",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchMove(S.cloneJSON(i)):this.eventList.forEach((function(t){return t.touchMove(S.cloneJSON(i))}))}},{key:"_mouseDown",value:function(t){var e=[this._getMousePoint(t)];if(this.priorityEvent)this.priorityEvent.touchStart(S.cloneJSON(e));else{var i,o=[],a=Object(_["a"])(this.eventList.values());try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.touchStart(S.cloneJSON(e)),this.priorityEvent)break;o.push(n)}}catch(s){a.e(s)}finally{a.f()}this.priorityEvent&&o.forEach((function(t){return t.touchEnd(S.cloneJSON(e))}))}}},{key:"_mouseUp",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchEnd(S.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchEnd(S.cloneJSON(e))}))}},{key:"_mouseMove",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchMove(S.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchMove(S.cloneJSON(e))}))}},{key:"_mouseWheel",value:function(t,e){var i=this;clearTimeout(this.wheelTimeOut);var o=Date.now(),a=o-this.wheelTime>400&&!this.wheelstatus;a&&(this.wheelstatus=!0,this._wheelStart(t,e)),this.wheelTime=o,this.wheelTimeOut=setTimeout((function(){i.wheelstatus=!1,i._wheelEnd(t,e)}),400),a||this._wheelChange(t,e)}},{key:"_wheelStart",value:function(t,e){if(this.priorityEvent)this.priorityEvent.wheelStart(t,S.cloneJSON(e));else{var i,o=[],a=Object(_["a"])(this.eventList.values());try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.wheelStart(t,S.cloneJSON(e)),this.priorityEvent)break;o.push(n)}}catch(s){a.e(s)}finally{a.f()}this.priorityEvent&&o.forEach((function(i){return i.wheelEnd(t,S.cloneJSON(e))}))}}},{key:"_wheelChange",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelChange(t,S.cloneJSON(e)):this.eventList.forEach((function(i){return i.wheelChange(t,S.cloneJSON(e))}))}},{key:"_wheelEnd",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelEnd(t,S.cloneJSON(e)):this.eventList.forEach((function(i){return i.wheelEnd(t,S.cloneJSON(e))}))}},{key:"_getTouchePoint",value:function(t){var e=this._getClientPosition(this.root,{x:0,y:0});return{x:(t.pageX-e.x)*this.magnification-this.core.x,y:(t.pageY-e.y)*this.magnification-this.core.y,id:t.identifier}}},{key:"_getMousePoint",value:function(t){return{x:t.offsetX*this.magnification-this.core.x,y:t.offsetY*this.magnification-this.core.y,id:0}}},{key:"_getClientPosition",value:function(t,e){return e.x+=t.offsetLeft,e.y+=t.offsetTop,"HTML"===t.tagName||null===t.offsetParent?e:this._getClientPosition(t.offsetParent,e)}},{key:"cursor",set:function(t){this.root.style.cursor=t}}]),t}(),B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{staticClass:"vue-picture-cut_canvas"})},H=[],T=(i("cb29"),i("4de4"),i("c975"),i("3835")),z=i("5530"),A=(i("25f0"),function(t){return Object.prototype.toString.call(t)}),N=function(){function t(){Object(s["a"])(this,t),this.pStart={x:0,y:0},this.pEnd={x:1,y:1},this.pCrt1={x:0,y:0},this.pCrt2={x:0,y:0},this.setOptByString("ease")}return Object(r["a"])(t,[{key:"setOpt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ease";if("[object Array]"===A(t)&&t.length>=4){var e=t;return this.setOptByArr(e[0],e[1],e[2],e[3])}return"[object String]"===A(t)?this.setOptByString(t):this.setOptByString("ease")}},{key:"setOptByString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ease",i=t.BEZIER[e];return void 0===i&&(i=t.BEZIER.ease),this.setOptByArr(i[0],i[1],i[2],i[3])}},{key:"setOptByArr",value:function(t,e,i,o){return this.pCrt1={x:t,y:e},this.pCrt2={x:i,y:o},this}},{key:"getPoint",value:function(t){var e=[1,t,t*t,t*t*t],i=[[1,0,0,0],[-3,3,0,0],[3,-6,3,0],[-1,3,-3,1]],o=[[this.pStart.x,this.pStart.y],[this.pCrt1.x,this.pCrt1.y],[this.pCrt2.x,this.pCrt2.y],[this.pEnd.x,this.pEnd.y]],a=[e[0]*i[0][0]+e[1]*i[1][0]+e[2]*i[2][0]+e[3]*i[3][0],e[0]*i[0][1]+e[1]*i[1][1]+e[2]*i[2][1]+e[3]*i[3][1],e[0]*i[0][2]+e[1]*i[1][2]+e[2]*i[2][2]+e[3]*i[3][2],e[0]*i[0][3]+e[1]*i[1][3]+e[2]*i[2][3]+e[3]*i[3][3]],n=[a[0]*o[0][0]+a[1]*o[1][0]+a[2]*o[2][0]+a[3]*o[3][0],a[0]*o[0][1]+a[1]*o[1][1]+a[2]*o[2][1]+a[3]*o[3][1]],s={x:n[0],y:n[1]};return s.y}}]),t}();N.BEZIER={linear:[0,0,1,1],ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};var V=new N,I=function(){function t(e){Object(s["a"])(this,t),this.duration=1e3,this.timing="ease",this.delay=0,this.iteration=1,this.direction="normal",this.change=function(){return!1},this.end=function(){},this.startTime=0,this.id=0,void 0!==e.duration&&(this.duration=e.duration),void 0!==e.timing&&(this.timing=e.timing),void 0!==e.delay&&(this.delay=e.delay),void 0!==e.iteration&&(this.iteration=e.iteration),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.change&&(this.change=e.change),void 0!==e.end&&(this.end=e.end);var i="infinite"===this.iteration?9999999999999:this.iteration*this.duration;this.times="alternate"===this.direction||"alternate-reverse"===this.direction?2*i:i,V.setOpt(this.timing)}return Object(r["a"])(t,[{key:"start",value:function(){var t=this;return this.startTime=0,this.delay?setTimeout((function(){t.startTime=Date.now(),t._do()}),this.delay):(this.startTime=Date.now(),this._do()),this}},{key:"_do",value:function(){var t=this;this.id=requestAnimationFrame((function(){var e=Date.now()-t.startTime,i=e/t.duration,o=parseInt(String(i));switch(i-=o,t.direction){case"normal":i=e<t.times?i:1;break;case"reverse":i=e<t.times?1-i:0;break;case"alternate":i=o%2?e<t.times?1-i:0:e<t.times?i:1,o/2===t.iteration&&(i=0);break;case"alternate-reverse":i=o%2?e<t.times?i:1:e<t.times?1-i:0,o/2===t.iteration&&(i=1);break}var a=V.getPoint(i),n=t.change(a);!1!==n&&e<t.times?t._do():t.end()}))}},{key:"abort",value:function(){this.id>0&&cancelAnimationFrame(this.id),this.id=0}}]),t}();function J(t){return new I(t)}var $=function(){function t(e,i){Object(s["a"])(this,t),this.className="PhotoMain",this.imgRect={x:0,y:0,w:0,h:0},this.showRect={x:0,y:0,w:0,h:0,r:0,sV:!1,sH:!1},this.moveRect={minX:null,minY:null,maxX:null,maxY:null},this.touchList=[],this.status=null,this.touchstartPoint={x:0,y:0},this.touchstartEvent=S.doubleTouche({x:0,y:0,id:0}),this.animation=void 0,this.scaleTimer=null,this.loadImgEd=new Map,e.width=i.drawWidth,e.height=i.drawHeight,i.addEventList(this),this.root=i,this.canvas=e,this.ctx=e.getContext("2d"),this.ctx.translate(this.root.core.x,this.root.core.y)}return Object(r["a"])(t,[{key:"setSrc",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showRect.r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.clear(),this.src=t,this.loadingEvent&&this.loadingEvent(!0),S.loadImg(t).then((function(t){o||(e.originalImg=t);var a=S.clipByMax(t,1500);if(a)e.setSrc(a.src,i,++o);else{if(e.img=t,e._initRect(),e.showRect.r=i,e.moveRect.minX&&e.moveRect.minY){e.loadImgEd.forEach((function(t){t&&t()}));var n=e.showRect,s=n.x,r=n.y,c=n.w,h=n.h,l=n.r,u=n.sV,v=n.sH,d=e._checkRange({x:s,y:r,w:c,h:h,r:l,sV:u,sH:v});e.showRect={x:s+d[0],y:r+d[1],w:c+d[2],h:h+d[3],r:l,sV:u,sH:v}}else e._initMoveRange();e._draw(e.imgRect,e.showRect),e.showRect.r=i,e.loadingEvent&&e.loadingEvent(!1)}}),(function(){e.loadingEvent&&e.loadingEvent(!1)}))}},{key:"setMoveRange",value:function(t,e,i,o,a,n){if(this._initMoveRange(t,e,i,o),!this.img)return[0,0,0,0];if(a&&n){var s=this.showRect,r=s.x,c=s.y,h=s.w,l=s.h,u=s.r,v=s.sV,d=s.sH,m=a.x-r,f=a.y-c,g=h*n-h,p=l*n-l,y=this._checkRange(Object(z["a"])(Object(z["a"])({},a),{},{w:h*n,h:l*n,r:u,sV:v,sH:d}));return[m+y[0],f+y[1],g+y[2],p+y[3]]}var b=this._checkRange(),w=Object(T["a"])(b,4),k=w[0],_=w[1],R=w[2],x=w[3];return[k,_,R,x]}},{key:"setAngle",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.img?(i&&this.animation&&this.animation.abort(),this.loadImgEd.forEach((function(o){o&&o({showRect:Object(z["a"])(Object(z["a"])({},e.showRect),{},{r:t})},i)}))):this.showRect.r=t}},{key:"setFlip",value:function(t,e){var i=this.showRect.sH,o=this.showRect.sV;i===e&&o===t||(this.showRect.sV=t,this.showRect.sH=e,i!==e&&(this.showRect.x*=-1),o===t&&(this.showRect.y*=-1),this.img&&this._draw(this.imgRect,this.showRect))}},{key:"setFlipV",value:function(t){var e=this.showRect.sV;e!==t&&(this.showRect.sV=t,this.showRect.y*=-1,this.img&&this._draw(this.imgRect,this.showRect))}},{key:"setFlipH",value:function(t){var e=this.showRect.sH;e!==t&&(this.showRect.sH=t,this.showRect.x*=-1,this.img&&this._draw(this.imgRect,this.showRect))}},{key:"scale",value:function(t){var e,i=this;if(this.img&&!(t<0)&&1!==t){null!==this.scaleTimer&&clearTimeout(this.scaleTimer),null===(e=this.animation)||void 0===e||e.abort(),this.touchstartPoint={x:0,y:0};var o=this._changePointByCanvas(this.showRect);this._scaleByZoom(t,o),this._draw(this.imgRect,this.showRect),this.scaleTimer=setTimeout((function(){var t=i._checkRange(),e=Object(T["a"])(t,4),o=e[0],a=e[1],n=e[2],s=e[3];i.doAnimation(o,a,n,s,0)}),500)}}},{key:"onLoading",value:function(t){this.loadingEvent=t}},{key:"setShowRect",value:function(t){this.img&&(this.showRect=t,this._draw(this.imgRect,this.showRect))}},{key:"_changePointByCanvas",value:function(t){var e=this.showRect,i=e.r,o=e.sV,a=e.sH;return t.x*=a?-1:1,t.y*=o?-1:1,S.rotatePoint(t.x,t.y,i)}},{key:"_changePointByImage",value:function(t){var e=this.showRect,i=e.r,o=e.sV,a=e.sH,n=S.rotatePoint(t.x,t.y,-i);return n.x*=a?-1:1,n.y*=o?-1:1,n}},{key:"_initRect",value:function(){var t=this.img;if(t){var e=this.root.drawWidth,i=this.root.drawHeight,o=t.width/e,a=t.height/i,n=o<a?a:o,s=t.width/n,r=t.height/n;this.imgRect={x:0,y:0,w:t.width,h:t.height},this.showRect={x:0,y:0,w:s,h:r,r:this.showRect.r,sV:this.showRect.sV,sH:this.showRect.sH}}}},{key:"_initMoveRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===t||null===e||null===i||null===o){var a=this.imgRect,n=a.w,s=a.h;if(0===n)return;var r=this.root.drawWidth,c=this.root.drawHeight,h=r/c,l=n/s;if(h>l){var u=c*l,v=c;t=-u/2,e=-v/2}else{var d=r,m=r/l;t=-d/2,e=-m/2}i=-t,o=-e,this.moveRect={minX:t,minY:e,maxX:i,maxY:o}}else this.moveRect={minX:t,minY:e,maxX:i,maxY:o}}},{key:"_draw",value:function(t,e){if(this.clear(),this.img){var i=e.x,o=e.y,a=e.w,n=e.h,s=e.r,r=e.sV,c=e.sH,h=this.ctx;if(h.save(),h.rotate(-s*Math.PI/180),h.scale(c?-1:1,r?-1:1),h.drawImage(this.img,t.x,t.y,t.w,t.h,i-a/2,o-n/2,a,n),h.scale(c?1:-1,r?1:-1),this.root.debug){h.strokeStyle="#0f0",h.lineWidth=2;for(var l=0;l<this.root.drawHeight/200;l++)h.beginPath(),h.moveTo(-this.root.core.x,100*l+50),h.lineTo(this.root.core.x,100*l+50),h.stroke(),h.closePath(),h.beginPath(),h.moveTo(-this.root.core.x,100*-l-50),h.lineTo(this.root.core.x,100*-l-50),h.stroke(),h.closePath();for(var u=0;u<this.root.drawWidth/200;u++)h.beginPath(),h.moveTo(100*u+50,-this.root.core.y),h.lineTo(100*u+50,this.root.core.y),h.stroke(),h.closePath(),h.beginPath(),h.moveTo(100*-u-50,-this.root.core.y),h.lineTo(100*-u-50,this.root.core.y),h.stroke(),h.closePath();null!==this.moveRect.minX&&null!==this.moveRect.maxX&&null!==this.moveRect.minY&&null!==this.moveRect.maxY&&(h.strokeStyle="#00f",h.fillStyle="rgba(0,0,0,0)",h.lineWidth=2,h.strokeRect(this.moveRect.minX,this.moveRect.minY,this.moveRect.maxX-this.moveRect.minX,this.moveRect.maxY-this.moveRect.minY)),h.beginPath(),h.fillStyle="#fff",h.arc(0,0,6,0,2*Math.PI),h.fill(),h.closePath()}h.restore()}}},{key:"clear",value:function(){this.ctx.clearRect(-this.root.core.x,-this.root.core.y,this.root.drawWidth,this.root.drawHeight)}},{key:"touchEnd",value:function(t){this.img&&this.touchList.length&&(t=this.touchList.filter((function(e){return e.id!==t[0].id})),0===t.length?this.wheelEnd():1===t.length&&this._touchStart1(t[0]),this.touchList=t)}},{key:"touchMove",value:function(t){if(this.img)if(1===t.length)this._touchMove1(t[0]);else if(2===t.length)this._touchMove2(t[0],t[1]);else if(t.length>2){var e=this.touchList.map((function(t){return t.id}));t=t.filter((function(t){return e.indexOf(t.id)>-1})),2===t.length&&this._touchMove2(t[0],t[1])}}},{key:"touchStart",value:function(t){var e;if(this.img){null===(e=this.animation)||void 0===e||e.abort();var i=t[0];this.touchList.length?1===this.touchList.length&&this.touchList[0].id!==i.id&&(this.touchList.push(i),this._touchStart2(this.touchList[0],this.touchList[1])):(this.touchList.push(i),this._touchStart1(i))}}},{key:"wheelStart",value:function(t,e){this.img&&(this.status="scale",this.wheelChange(t,e))}},{key:"wheelChange",value:function(t,e){var i;if(this.img){null===(i=this.animation)||void 0===i||i.abort(),this.touchstartEvent=S.doubleTouche(e);var o=this.touchstartEvent.core,a=this._changePointByImage(o);this.touchstartPoint=this._getPointerLocation(a),this.root.setPriority(this),t=1+5e-4*t,t=t>1.08?1.08:t<.92593?.92593:t,this._scaleByZoom(t,e),this._draw(this.imgRect,this.showRect)}}},{key:"wheelEnd",value:function(){if(this.img){this.status=null,this.touchstartEvent=S.doubleTouche({x:0,y:0,id:0}),this.touchstartPoint={x:0,y:0};var t=this._checkRange(),e=Object(T["a"])(t,4),i=e[0],o=e[1],a=e[2],n=e[3];this.doAnimation(i,o,a,n,0),this.root.deletePriority(this.className)}}},{key:"_touchStart1",value:function(t){this.status="move",this.touchstartEvent=S.doubleTouche(t);var e=this._changePointByImage(t);this.touchstartPoint=this._getPointerLocation(e)}},{key:"_touchStart2",value:function(t,e){var i=this.showRect,o=i.sV,a=i.sH;this.status="scale",this.touchstartEvent=!o&&a||o&&!a?S.doubleTouche(e,t):S.doubleTouche(t,e);var n=this.touchstartEvent.core,s=this._changePointByImage(n);this.touchstartPoint=this._getPointerLocation(s),this.root.setPriority(this)}},{key:"_touchMove1",value:function(t){"move"===this.status&&(this.root.setPriority(this),this.touchList[0]=t,this._move(t),this._draw(this.imgRect,this.showRect))}},{key:"_touchMove2",value:function(t,e){if("scale"===this.status){this.touchList=[t,e];var i=S.doubleTouche(t,e);this._scaleByLocation(i),this._draw(this.imgRect,this.showRect)}}},{key:"_getPointerLocation",value:function(t){return{x:t.x-this.showRect.x,y:t.y-this.showRect.y}}},{key:"_move",value:function(t){var e=this.touchstartPoint,i=this._changePointByImage(t);this.showRect.x=i.x-e.x,this.showRect.y=i.y-e.y}},{key:"_scaleByLocation",value:function(t){var e=t.length/this.touchstartEvent.length;e=e<.9091?.9091:e,e=e>1.1?1.1:e,this._scaleByZoom(e,t.core),this.touchstartEvent=t}},{key:"_scaleByZoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=this.touchstartPoint;this.touchstartPoint={x:o.x*t,y:o.y*t},o=this.touchstartPoint;var a=this.showRect,n=a.w,s=a.h,r=a.r,c=a.sV,h=a.sH,l=this._changePointByImage(e);this.showRect={x:l.x-o.x,y:l.y-o.y,w:n*t,h:s*t,r:r+i,sV:c,sH:h}}},{key:"_checkRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showRect,e=t.x,i=t.y,o=t.w,a=t.h;e-=o/2,i-=a/2;var n=this.moveRect,s=n.minX,r=n.minY,c=n.maxX,h=n.maxY;s=s||0,r=r||0,c=c||0,h=h||0;var l=e,u=i,v=o,d=a,m=this._getPohtoByRangeLocation([e,i,o,a]),f=o/a;m[4]<=0&&(v=c-s,d=v/f,l=e+(o-v)/2,u=i+(a-d)/2),m=this._getPohtoByRangeLocation([l,u,v,d]),m[5]<=0&&(d=h-r,v=d*f,l=e+(o-v)/2,u=i+(a-d)/2),m=this._getPohtoByRangeLocation([l,u,v,d]),m[0]>0&&(l-=m[0]),m[1]>0&&(u-=m[1]),m[2]<0&&(l-=m[2]),m[3]<0&&(u-=m[3]);var g=v-o,p=d-a;return[l-e+g/2,u-i+p/2,g,p]}},{key:"_getPohtoByRangeLocation",value:function(t){var e=this.showRect,i=e.x,o=e.y,a=e.w,n=e.h,s=this.moveRect,r=s.minX,c=s.minY,h=s.maxX,l=s.maxY;return t&&(i=t[0],o=t[1],a=t[2],n=t[3]),[i-(r||0),o-(c||0),i+a-(h||0),o+n-(l||0),a-(h||0)+(r||0),n-(l||0)+(c||0)]}},{key:"doAnimation",value:function(t,e,i,o,a,n){var s=this;if(t||e||i||o||a){var r=this.showRect,c=r.x,h=r.y,l=r.w,u=r.h,v=r.r,d=r.sV,m=r.sH;this.showRect={x:c+t,y:h+e,w:l+i,h:u+o,r:v+a,sV:d,sH:m},this.animation=J({duration:300,timing:"ease-in-out",change:function(n){s._showRect={x:c+n*t,y:h+n*e,w:l+n*i,h:u+n*o,r:v+n*a,sV:d,sH:m},s._draw(s.imgRect,s._showRect)},end:function(){s._showRect&&(s.showRect=s._showRect,s._showRect=void 0),n&&n()}}).start()}}}]),t}(),W=function(t){Object(c["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.photoMain=null,t}return Object(r["a"])(i,[{key:"watchAngle",value:function(t){this.photoMain&&void 0!==t&&this.photoMain.setAngle(t,!0)}},{key:"mounted",value:function(){var t=this;setTimeout((function(){t.photoMain=new $(t.$el,t.photoRoot),t.photoMain.onLoading((function(e){t._loading=e}))}),0)}}]),i}(u["h"]);Object(l["a"])([Object(u["c"])({from:"vuePictureCut",default:"photoRoot"})],W.prototype,"photoRoot",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],W.prototype,"angle",void 0),Object(l["a"])([Object(u["e"])("loading",{type:Boolean,default:!1})],W.prototype,"_loading",void 0),Object(l["a"])([Object(u["i"])("angle")],W.prototype,"watchAngle",null),W=Object(l["a"])([u["a"]],W);var X=W,Y=X,D=Object(p["a"])(Y,B,H,!1,null,null,null),q=D.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"vue-picture-cut_mask",attrs:{preserveAspectRatio:"none",viewBox:t.viewBox}},[i("path",{staticClass:"cls-1",attrs:{fill:t.color||"rgba(0,0,0,.5)",d:"M0,0 H"+t.drawWidth+" V"+t.drawHeight+" H0 V0 Z "+t.round}}),t.thisResize||!t.thisRound?i("rect",t._b({staticClass:"cls-3",style:{"stroke-dasharray":t.border,stroke:t.thisRound?"rgba(255,255,255,.7)":t.borderColor||"#ff5500"}},"rect",t.rect,!1)):t._e(),t.thisRound?i("path",{staticClass:"cls-2",attrs:{stroke:t.borderColor||"#ff5500",d:t.round}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.TLHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.TRHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.BLHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.BRHorn}}):t._e()])},F=[],U=(i("99af"),i("7db0"),new Map([["Top Left","nw-resize"],["Top Right","ne-resize"],["Bottom Left","sw-resize"],["Bottom Right","se-resize"],["Top","n-resize"],["Left","w-resize"],["Right","e-resize"],["Bottom","s-resize"]])),G=function(){function t(e,i,o,a,n){var r=this;Object(s["a"])(this,t),this.className="PhotoMask",this._isRound=!1,this.touche=null,this.touchePosition=void 0,this.animation=void 0,e.addEventList(this),this.root=e,this.width=i||1,this.height=o||1,this.resize=a,this.faultTolerant=8*e.magnification;var c=this.maskRect=this._getMaskRect();this._draw=n,n(this.maskRect,!1,this);var h=this.root.getEventList("PhotoMain");h&&(h.loadImgEd.set(this.className,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return r._reset(h,t,e)})),h.setMoveRange(c.x,c.y,c.x+c.w,c.y+c.h))}return Object(r["a"])(t,[{key:"_reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object.assign({},t,e),a=this._getMaskRect(),n=o.showRect,s=this._isRound?S.getEllipseRectByRect(a.w,a.h,n.r):S.getRectByRect(a.w,a.h,n.r),r=t.setMoveRange(s.x,s.y,s.x+s.w,s.y+s.h),c=Object(T["a"])(r,4),h=c[0],l=c[1],u=c[2],v=c[3];i?t.doAnimation(h,l,u,v,n.r-t.showRect.r):t.setShowRect({x:n.x+h,y:n.y+l,w:n.w+u,h:n.h+v,r:n.r,sV:n.sV,sH:n.sH})}},{key:"reset",value:function(t,e){this.width=t||1,this.height=e||1;var i=this._getMaskRect(),o=i.x-this.maskRect.x,a=i.y-this.maskRect.y,n=i.w-this.maskRect.w,s=i.h-this.maskRect.h,r=this.root.getEventList("PhotoMain");if(r){var c=r.showRect,h=i.w/this.maskRect.w,l=S.rotatePoint(this.maskRect.x+this.maskRect.w/2,this.maskRect.y+this.maskRect.h/2,-c.r);l.x*=c.sH?-1:1,l.y*=c.sV?-1:1;var u={x:(c.x-l.x)*h,y:(c.y-l.y)*h},v=this._isRound?S.getEllipseRectByRect(i.w,i.h,c.r):S.getRectByRect(i.w,i.h,c.r),d=r.setMoveRange(v.x,v.y,v.x+v.w,v.y+v.h,u,h),m=Object(T["a"])(d,4),f=m[0],g=m[1],p=m[2],y=m[3];r.doAnimation(f,g,p,y,0)}this._animation(o,a,n,s)}},{key:"setResize",value:function(t){t||this.touchEnd(),this.resize=t,this._draw(this.maskRect,!1,this)}},{key:"getResize",value:function(){return this.resize}},{key:"clip",value:function(t,e,i){var o=this.root.getEventList("PhotoMain");if(!o||!o.originalImg||!o.img)return null;var a,n=o.originalImg,s=o.showRect,r=this.maskRect;if(t){var c=r.w/r.h;a=c<1?t*c/r.w:t/r.w}else a=n.width/s.w;var h=Math.round(r.w*a),l=Math.round(r.h*a),u={x:(s.x-s.w/2)*a,y:(s.y-s.h/2)*a,w:s.w*a,h:s.h*a,r:s.r,sV:s.sV,sH:s.sH},v=this._isRound?S.clipByRound(n,h,l,u,e,i):S.clipBy(n,h,l,u,e,i);return{src:v,file:S.base64ToBlob(v)}}},{key:"_getMaskRect",value:function(){var t,e,i=this.width/this.height,o=this.root.drawWidth/this.root.drawHeight;return i<o?(e=.75*this.root.drawHeight,t=i*e):(t=.75*this.root.drawWidth,e=t/i),{x:-t/2,y:-e/2,w:t,h:e}}},{key:"_animation",value:function(t,e,i,o){var a=this;if(t||e||i||o){var n=this.maskRect,s=n.x,r=n.y,c=n.w,h=n.h;this.maskRect={x:s+t,y:r+e,w:c+i,h:h+o},this.animation=J({duration:300,timing:"ease-in-out",change:function(n){a._maskRect={x:s+n*t,y:r+n*e,w:c+n*i,h:h+n*o},a._draw(a._maskRect,!1,a)},end:function(){a._maskRect&&(a.maskRect=a._maskRect,a._maskRect=void 0)}}).start()}}},{key:"_isHover",value:function(t,e){var i=this.faultTolerant,o=2,a=this.maskRect,n=a.x,s=a.y,r=a.w,c=a.h;return t>=n-i-o&&t<=n+i&&e>=s-i-o&&e<=s+i?"Top Left":t>=n+r-i-o&&t<=n+r+i&&e>=s-i-o&&e<=s+i?"Top Right":t>=n-i-o&&t<=n+i&&e>=s+c-i-o&&e<=s+c+i?"Bottom Left":t>=n+r-i-o&&t<=n+r+i&&e>=s+c-i-o&&e<=s+c+i?"Bottom Right":t>=n&&t<=n+r&&e>=s-i-o&&e<=s+i?"Top":t>=n-i-o&&t<=n+i&&e>=s&&e<=s+c?"Left":t>=n+r-i-o&&t<=n+r+i&&e>=s&&e<=s+c?"Right":t>=n&&t<=n+r&&e>=s+c-i-o&&e<=s+c+i?"Bottom":void 0}},{key:"touchStart",value:function(t){if(this.resize&&null===this.touche){var e=t[0];this.touchePosition=this._isHover(e.x,e.y),this.touchePosition&&(this.root.setPriority(this),this.touche=e,this._draw(this.maskRect,!0,this))}}},{key:"touchEnd",value:function(){null!==this.touche&&this.touchePosition&&(this.touche=null,this.maskRect.w<0&&(this.maskRect.x+=this.maskRect.w,this.maskRect.w*=-1),this.maskRect.h<0&&(this.maskRect.y+=this.maskRect.h,this.maskRect.h*=-1),this.reset(this.maskRect.w,this.maskRect.h),this.root.deletePriority(this.className),this.touchePosition=void 0,this._draw(this.maskRect,!1,this),this.root.cursor="default")}},{key:"touchMove",value:function(t){var e=this;if(this.resize&&null!==this.touche&&this.touchePosition){var i=this.touche.id,o=t.find((function(t){return t.id===i}));o&&(this.touchePosition.split(" ").forEach((function(t){switch(t){case"Top":e._moveTop(o);break;case"Bottom":e._moveBottom(o);break;case"Left":e._moveLeft(o);break;case"Right":e._moveRight(o);break}})),this.touche=o,this._draw(this.maskRect,!0,this))}else if(this.resize){var a=this._isHover(t[0].x,t[0].y);this.root.cursor=a&&U.get(a)||"move"}}},{key:"wheelStart",value:function(){}},{key:"wheelEnd",value:function(){}},{key:"wheelChange",value:function(){}},{key:"_moveTop",value:function(t){var e=t.y-this.touche.y;this.maskRect.y+=e,this.maskRect.h-=e}},{key:"_moveBottom",value:function(t){var e=t.y-this.touche.y;this.maskRect.h+=e}},{key:"_moveLeft",value:function(t){var e=t.x-this.touche.x;this.maskRect.x+=e,this.maskRect.w-=e}},{key:"_moveRight",value:function(t){var e=t.x-this.touche.x;this.maskRect.w+=e}},{key:"isRound",get:function(){return this._isRound},set:function(t){this._isRound=t,this._draw(this.maskRect,!1,this),this.reset(this.maskRect.w,this.maskRect.h)}}]),t}(),K=function(t){Object(c["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.mask=null,t.viewBox="0 0 0 0",t.drawWidth=0,t.drawHeight=0,t.round="M0,150 V+150 a150,150 0 1 0 0,-1",t.rect={x:0,y:0,width:0,height:0},t.border="10, 5",t.thisRound=!1,t.thisResize=!0,t}return Object(r["a"])(i,[{key:"watchWidth",value:function(t){this.mask&&this.mask.reset(t,this.height)}},{key:"watchHeight",value:function(t){this.mask&&this.mask.reset(this.width,t)}},{key:"watchIsRound",value:function(t){this.thisRound=t,this.mask&&(this.mask.isRound=t)}},{key:"watchResize",value:function(t){this.thisResize=t,this.mask&&this.mask.setResize(t)}},{key:"mounted",value:function(){var t=this;this.thisRound=this.isRound,this.thisResize=this.resize,setTimeout((function(){t.viewBox="0 0 ".concat(t.photoRoot.drawWidth," ").concat(t.photoRoot.drawHeight),t.drawWidth=t.photoRoot.drawWidth,t.drawHeight=t.photoRoot.drawHeight,t.mask=new G(t.photoRoot,t.width,t.height,t.resize,(function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;t.setPathOption(e,i,o)})),t.mask.isRound=t.isRound}),0)}},{key:"setPathOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.thisRound=i.isRound,this.thisResize=i.getResize();var o=t.x,a=t.y,n=t.w,s=t.h;o+=this.photoRoot.core.x,a+=this.photoRoot.core.y,n<0&&(o+=n,n*=-1),s<0&&(a+=s,s*=-1);var r=n/2,c=s/2;this.isRound?this.round="M".concat(o,",").concat(a+c," a").concat(r,",").concat(c," 0 1 0 0,-1"):this.round="M".concat(o,",").concat(a," H").concat(n+o," V").concat(s+a," H").concat(o," V").concat(a),this.rect={x:o,y:a,width:n,height:s},this.border=e?"10, 0":"10, 5"}},{key:"TLHorn",get:function(){var t=this.rect.x,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t-5," V").concat(e+15," H").concat(t-5," V").concat(e-5," H").concat(t+15," V").concat(e-5," H").concat(t+15," V").concat(e," Z")}},{key:"TRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t+5," V").concat(e+15," H").concat(t+5," V").concat(e-5," H").concat(t-15," V").concat(e-5," H").concat(t-15," V").concat(e," Z")}},{key:"BLHorn",get:function(){var t=this.rect.x,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t-5," V").concat(e-15," H").concat(t-5," V").concat(e+5," H").concat(t+15," V").concat(e+5," H").concat(t+15," V").concat(e," Z")}},{key:"BRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t+5," V").concat(e-15," H").concat(t+5," V").concat(e+5," H").concat(t-15," V").concat(e+5," H").concat(t-15," V").concat(e," Z")}}]),i}(u["h"]);Object(l["a"])([Object(u["c"])({from:"vuePictureCut",default:"photoRoot"})],K.prototype,"photoRoot",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"rgba(0,0,0,.5)"})],K.prototype,"color",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"#ff5500"})],K.prototype,"borderColor",void 0),Object(l["a"])([Object(u["d"])({type:Number,default:1})],K.prototype,"width",void 0),Object(l["a"])([Object(u["d"])({type:Number,default:1})],K.prototype,"height",void 0),Object(l["a"])([Object(u["d"])({type:Boolean,default:!1})],K.prototype,"isRound",void 0),Object(l["a"])([Object(u["d"])({type:Boolean,default:!0})],K.prototype,"resize",void 0),Object(l["a"])([Object(u["i"])("width")],K.prototype,"watchWidth",null),Object(l["a"])([Object(u["i"])("height")],K.prototype,"watchHeight",null),Object(l["a"])([Object(u["i"])("isRound")],K.prototype,"watchIsRound",null),Object(l["a"])([Object(u["i"])("resize")],K.prototype,"watchResize",null),K=Object(l["a"])([u["a"]],K);var Q=K,tt=Q,et=(i("b3c8"),Object(p["a"])(tt,Z,F,!1,null,"54fa9232",null)),it=et.exports,ot=function(t){Object(c["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.loading=!1,t.hasMenu=!1,t.sliderAngle=0,t.photoRoot=new L,t.vuePictureCut=t.photoRoot,t}return Object(r["a"])(i,[{key:"watchSrc",value:function(t){t&&this.setImg()}},{key:"watchInitAngle",value:function(t){if(void 0!==t){var e=this.photoRoot.getEventList("PhotoMain");if(e){var i=(e.showRect.r+t)%360;this.sliderAngle=i>180?i-360:i<-180?i+360:i}}}},{key:"watchSliderAngle",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}},{key:"created",value:function(){this.watchInitAngle(this.initAngle),this.$slots.menu&&(this.hasMenu=!0)}},{key:"mounted",value:function(){var t=this;this.photoRoot.init(this.main,this.magnification),setTimeout((function(){t.setImg()}),0)}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"setImg",value:function(){var t=this.photoRoot.getEventList("PhotoMain"),e=this.src;e&&t&&t.setSrc(e,this.initAngle),void 0!==this.initAngle&&(this.sliderAngle=this.initAngle%180)}},{key:"sureCut",value:function(){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}},{key:"scale",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");null===e||void 0===e||e.scale(t)}}]),i}(u["h"]);Object(l["a"])([Object(u["d"])({type:String,required:!1})],ot.prototype,"backgroundColor",void 0),Object(l["a"])([Object(u["d"])({type:Number,default:1.5})],ot.prototype,"magnification",void 0),Object(l["a"])([Object(u["d"])({type:String,default:null})],ot.prototype,"src",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],ot.prototype,"initAngle",void 0),Object(l["a"])([Object(u["d"])({type:Boolean,required:!1})],ot.prototype,"rotateControl",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],ot.prototype,"maxPixel",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],ot.prototype,"encoderOptions",void 0),Object(l["a"])([Object(u["d"])({type:String,required:!1})],ot.prototype,"format",void 0),Object(l["a"])([Object(u["d"])({type:Object,default:function(){return{width:1,height:1,isRound:!1,resize:!0}}})],ot.prototype,"mskOption",void 0),Object(l["a"])([Object(u["g"])()],ot.prototype,"main",void 0),Object(l["a"])([Object(u["f"])()],ot.prototype,"vuePictureCut",void 0),Object(l["a"])([Object(u["i"])("src")],ot.prototype,"watchSrc",null),Object(l["a"])([Object(u["i"])("initAngle")],ot.prototype,"watchInitAngle",null),Object(l["a"])([Object(u["i"])("sliderAngle")],ot.prototype,"watchSliderAngle",null),Object(l["a"])([Object(u["b"])("on-change")],ot.prototype,"onChangeEvent",null),ot=Object(l["a"])([Object(u["a"])({components:{VuePictureCutCanvas:q,VuePictureCutMask:it}})],ot);var at=ot,nt=at,st=(i("f08b"),Object(p["a"])(nt,w,k,!1,null,null,null)),rt=st.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-picture-cut-menu dark-theme",class:[["default","dark","gray"].indexOf(t.theme)>-1?t.theme+"-theme":"default-theme"]},[i("div",{staticClass:"vue-picture-cut-menu_slider"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box"},[i("span",[t._v(t._s(t.menuRotateName))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),i("div",{staticClass:"vue-picture-cut-menu_slider-box-bar"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-button",style:{left:100*t.sliderAngle/361+50+"%"}},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"Â° ")])])])])]),i("div",{staticClass:"vue-picture-cut-menu_box"},[i("div",{staticClass:"vue-picture-cut-menu_box-content"},[i("div",{staticClass:"vue-picture-cut-menu_box-list",style:{width:"558px"}},[i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_flip-v",on:{click:t.setFlipV}}),i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_flip-h",on:{click:t.setFlipH}}),i("span"),i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-left",on:{click:function(e){return t.rotate(90,!0)}}}),i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-right",on:{click:function(e){return t.rotate(-90,!0)}}}),i("span"),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:t.setMaskResize}},[i("div",{staticClass:"__mask"},[t._v(t._s(t.sizeAutoName))])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:t.setMaskSizeToOriginal}},[i("div",{staticClass:"__mask"},[t._v(t._s(t.sizeRawName))])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(1,1)}}},[i("div",{staticClass:"__mask"},[t._v("1:1")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(4,3)}}},[i("div",{staticClass:"__mask _5_4"},[t._v("4:3")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(3,4)}}},[i("div",{staticClass:"__mask _4_5"},[t._v("3:4")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(16,9)}}},[i("div",{staticClass:"__mask _5_4"},[t._v("16:9")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(9,16)}}},[i("div",{staticClass:"__mask _4_5"},[t._v("9:16")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(3,2)}}},[i("div",{staticClass:"__mask _5_4"},[t._v("3:2")])]),i("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(2,3)}}},[i("div",{staticClass:"__mask _4_5"},[t._v("2:3")])])])])]),i("div",{staticClass:"vue-picture-cut-menu_confirm"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.cancel,expression:"cancel"}],staticClass:"__cancel",on:{click:t.onCancelEvent}},[t._v(t._s(t.cancelName))]),i("div",{staticClass:"__sure",class:{__center:!t.cancel},on:{click:t.sureCut}},[t._v(t._s(t.confirmName))])])])},ht=[],lt=function(t){Object(c["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.sliderAngle=0,t}return Object(r["a"])(i,[{key:"watchSliderAngle",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"onCancelEvent",value:function(){}},{key:"sureCut",value:function(){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}},{key:"setMaskSize",value:function(t,e){var i=this.photoRoot.getEventList("PhotoMask");i&&(i.reset(t,e),i.setResize(!1))}},{key:"setMaskSizeToOriginal",value:function(){var t=this.photoRoot.getEventList("PhotoMain");t&&this.setMaskSize(t.imgRect.w,t.imgRect.h)}},{key:"setMaskResize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.photoRoot.getEventList("PhotoMask");e&&e.setResize(t)}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t%36!==0){var i=this.photoRoot.getEventList("PhotoMain");if(i){var o=(i.showRect.r+t)%360;this.sliderAngle=o>180?o-360:o<-180?o+360:o,i.setAngle(i.showRect.r+t,e)}}}},{key:"setFlipV",value:function(){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipV(!t.showRect.sV)}},{key:"setFlipH",value:function(){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipH(!t.showRect.sH)}}]),i}(u["h"]);Object(l["a"])([Object(u["c"])({from:"vuePictureCut",default:"photoRoot"})],lt.prototype,"photoRoot",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"default"})],lt.prototype,"theme",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],lt.prototype,"maxPixel",void 0),Object(l["a"])([Object(u["d"])({type:Number,required:!1})],lt.prototype,"encoderOptions",void 0),Object(l["a"])([Object(u["d"])({type:String,required:!1})],lt.prototype,"format",void 0),Object(l["a"])([Object(u["d"])({type:Boolean,default:!0})],lt.prototype,"cancel",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"Cancel"})],lt.prototype,"cancelName",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"Ok"})],lt.prototype,"confirmName",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"auto"})],lt.prototype,"sizeAutoName",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"raw"})],lt.prototype,"sizeRawName",void 0),Object(l["a"])([Object(u["d"])({type:String,default:"Rotate"})],lt.prototype,"menuRotateName",void 0),Object(l["a"])([Object(u["i"])("sliderAngle")],lt.prototype,"watchSliderAngle",null),Object(l["a"])([Object(u["b"])("on-change")],lt.prototype,"onChangeEvent",null),Object(l["a"])([Object(u["b"])("on-cancel")],lt.prototype,"onCancelEvent",null),lt=Object(l["a"])([u["a"]],lt);var ut=lt,vt=ut,dt=(i("57f5"),Object(p["a"])(vt,ct,ht,!1,null,null,null)),mt=dt.exports,ft={install:function(t){t.component("vue-picture-cut",rt),t.component("vue-picture-cut-canvas",q),t.component("vue-picture-cut-mask",it),t.component("vue-picture-cut-menu",mt)}},gt=i("5c96"),pt=i.n(gt);i("0fae");o["default"].config.productionTip=!1,o["default"].use(ft),o["default"].use(pt.a,{size:"mini"}),new o["default"]({el:"#app",render:function(t){return t(b)}}).$mount("#app")},f08b:function(t,e,i){"use strict";var o=i("3aa3"),a=i.n(o);a.a}});