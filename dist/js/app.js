(function(t){function e(e){for(var i,a,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&f.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],i=!0,s=1;s<o.length;s++){var c=o[s];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var i={},n={app:0},r=[];function a(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=i,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(o,i,function(e){return t[e]}.bind(null,i));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=c;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("cd49")},"1f8f":function(t,e,o){"use strict";o("d690")},"692c":function(t,e,o){},"79d2":function(t,e,o){"use strict";o("c5fa")},"7f7a":function(t,e,o){"use strict";o("692c")},ab39:function(t,e,o){"use strict";o("fbc0")},c5fa:function(t,e,o){},cd49:function(t,e,o){"use strict";o.r(e);var i=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"link-box"},[o("a",{attrs:{href:"https://github.com/987153776/vue-picture-cut",target:"_blank",type:"primary"}},[o("svg",{staticClass:"octicon octicon-mark-github v-align-middle",attrs:{height:"28",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true"}},[o("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})]),o("span",[t._v("github")])]),t._m(0),o("div",{staticClass:"language"},[o("span",{class:{active:"EN"===t.language},on:{click:function(e){t.language="EN"}}},[t._v("English")]),o("i"),o("span",{class:{active:"ZN"===t.language},on:{click:function(e){t.language="ZN"}}},[t._v("中文")])])]),o("vue-picture-cut",{ref:"pictureCut",staticClass:"cut",attrs:{src:t.src,"init-angle":t.form.initAngle,"msk-option":t.mskOption,"background-color":t.form.backgroundColor}},[o("vue-picture-cut-menu",{attrs:{slot:"menu","max-pixel":t.form.maxPixel,"encoder-options":t.form.encoderOptions,format:t.form.format,theme:t.form.menuTheme,"size-auto-name":t.config(t.language,"auto"),"size-raw-name":t.config(t.language,"raw"),"menu-rotate-name":t.config(t.language,"Rotate"),"cancel-name":t.config(t.language,"Cancel"),"confirm-name":t.config(t.language,"Ok")},on:{"on-change":t.cutChange},slot:"menu"})],1),o("vue-picture-cut-menu",{staticClass:"cut-menu",attrs:{root:t.pictureCut,"max-pixel":t.form.maxPixel,"encoder-options":t.form.encoderOptions,format:t.form.format,theme:t.form.menuTheme,"size-auto-name":t.config(t.language,"auto"),"size-raw-name":t.config(t.language,"raw"),"menu-rotate-name":t.config(t.language,"Rotate"),"cancel-name":t.config(t.language,"Cancel"),"confirm-name":t.config(t.language,"Ok")},on:{"on-change":t.cutChange}}),o("el-alert",{attrs:{closable:!1,type:"success",effect:"dark"}},[t._v(" "+t._s(t.config(t.language,'Now you can use the "utils" object to manipulate plug-ins in the browser console.'))+" ")]),o("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:t.form,"label-width":"140px",inline:""}},[o("el-form-item",{attrs:{label:t.config(t.language,"preview")+":","label-width":"70px"}},[o("a",{staticClass:"download-img",style:{"background-image":"url("+t.base64+")"},attrs:{download:"vue-picture-cut."+t.form.format.replace("image/",""),href:t.base64}},[t._v(" "+t._s(t.config(t.language,"download"))+" ")])]),o("el-form-item",{attrs:{label:"🙄"+t.config(t.language,"Select Picture")+":"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:"image/*","show-file-list":!1,"before-upload":t.inputChange}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.config(t.language,"Select")))])],1)],1),o("el-form-item",{attrs:{label:"😱"+t.config(t.language,"reset")+":"}},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.reset}},[t._v(t._s(t.config(t.language,"do")))])],1),o("el-form-item",{attrs:{label:"😱"+t.config(t.language,"Canvas bgColor")+":"}},[o("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.backgroundColor,callback:function(e){t.$set(t.form,"backgroundColor",e)},expression:"form.backgroundColor"}})],1),o("el-form-item",{attrs:{label:"😴"+t.config(t.language,"Mask color")+":"}},[o("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.maskColor,callback:function(e){t.$set(t.form,"maskColor",e)},expression:"form.maskColor"}})],1),o("el-form-item",{attrs:{label:"🤔"+t.config(t.language,"CropBox color")+":"}},[o("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.maskBorderColor,callback:function(e){t.$set(t.form,"maskBorderColor",e)},expression:"form.maskBorderColor"}})],1),o("el-form-item",{attrs:{label:"🤗"+t.config(t.language,"Menu theme")+":","label-width":"124px"}},[o("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:t.config(t.language,"Please select")},model:{value:t.form.menuTheme,callback:function(e){t.$set(t.form,"menuTheme",e)},expression:"form.menuTheme"}},[o("el-option",{attrs:{label:"default",value:"default"}}),o("el-option",{attrs:{label:"dark",value:"dark"}}),o("el-option",{attrs:{label:"gray",value:"gray"}})],1)],1),o("el-form-item",{attrs:{label:"😁"+t.config(t.language,"CropBox shape")+":"}},[o("el-radio-group",{model:{value:t.form.isRound,callback:function(e){t.$set(t.form,"isRound",e)},expression:"form.isRound"}},[o("el-radio",{attrs:{label:!1}},[t._v(t._s(t.config(t.language,"Rectangle")))]),o("el-radio",{attrs:{label:!0}},[t._v(t._s(t.config(t.language,"Ellipse")))])],1)],1),o("el-form-item",{attrs:{label:"😂"+t.config(t.language,"CropBox size")+":"}},[o("el-radio-group",{model:{value:t.form.resize,callback:function(e){t.$set(t.form,"resize",e)},expression:"form.resize"}},[o("el-radio",{attrs:{label:!1}},[t._v(t._s(t.config(t.language,"Unchangeable")))]),o("el-radio",{attrs:{label:!0}},[t._v(t._s(t.config(t.language,"Changeable")))])],1)],1),o("el-form-item",{attrs:{label:"😉"+t.config(t.language,"Scaling factor")+":"}},[o("el-input-number",{attrs:{min:0,step:.05},model:{value:t.form.zoom,callback:function(e){t.$set(t.form,"zoom",e)},expression:"form.zoom"}}),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$refs["pictureCut"].scale(t.form.zoom)}}},[t._v(" "+t._s(t.config(t.language,"Perform zoom"))+" ")])],1),o("el-form-item",{attrs:{label:"😎"+t.config(t.language,"Initial angle")+":"}},[o("el-input-number",{attrs:{placeholder:"auto"},model:{value:t.form.initAngle,callback:function(e){t.$set(t.form,"initAngle",e)},expression:"form.initAngle"}})],1),o("el-form-item",{attrs:{label:"😙"+t.config(t.language,"Cropped width")+":"}},[o("el-input-number",{attrs:{min:1,placeholder:"1"},model:{value:t.form.width,callback:function(e){t.$set(t.form,"width",e)},expression:"form.width"}})],1),o("el-form-item",{attrs:{label:"😪"+t.config(t.language,"Cropped height")+":"}},[o("el-input-number",{attrs:{min:1,placeholder:"1"},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",e)},expression:"form.height"}})],1),o("el-form-item",{attrs:{label:"🤑"+t.config(t.language,"Max pixels")+":","label-width":"124px"}},[o("el-input-number",{attrs:{min:1,placeholder:"auto"},model:{value:t.form.maxPixel,callback:function(e){t.$set(t.form,"maxPixel",e)},expression:"form.maxPixel"}})],1),o("el-form-item",{attrs:{label:"👑"+t.config(t.language,"compressibility")+":"}},[o("el-input-number",{attrs:{min:0,max:1,step:.1,placeholder:"0.8"},model:{value:t.form.encoderOptions,callback:function(e){t.$set(t.form,"encoderOptions",e)},expression:"form.encoderOptions"}})],1),o("el-form-item",{attrs:{label:"😍"+t.config(t.language,"Export format")+":","label-width":"124px"}},[o("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:t.config(t.language,"Please select")},model:{value:t.form.format,callback:function(e){t.$set(t.form,"format",e)},expression:"form.format"}},[o("el-option",{attrs:{label:"jpeg",value:"image/jpeg"}}),o("el-option",{attrs:{label:"png",value:"image/png"}})],1)],1)],1)],1)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a",{attrs:{href:"https://gitee.com/light-year/vue-picture-cut",target:"_blank",type:"primary"}},[o("img",{attrs:{height:"28",width:"95",src:"https://gitee.com/static/images/logo-black.svg?t=158106664"}})])}],a=o("9ab4"),s=o("1b40"),c={ZN:{download:"点击下载",reset:"重置",do:"执行","Select Picture":"选择图片",Select:"选择","Please select":"请选择","Perform zoom":"执行缩放",Rectangle:"矩形",Ellipse:"椭圆",Unchangeable:"不可改变",Changeable:"可改变","Canvas bgColor":"画布背景色","Mask color":"遮罩颜色","CropBox color":"裁剪框颜色","Menu theme":"菜单栏主题","CropBox shape":"裁剪框形状","CropBox size":"裁剪框尺寸","Scaling factor":"缩放系数","Initial angle":"初始角度","Cropped width":"裁剪比例宽","Cropped height":"裁剪比例高","Max pixels":"裁剪长边像素",compressibility:"图片压缩率","Export format":"裁剪图片格式",preview:"预览",auto:"自由",raw:"原始",Rotate:"旋转",Cancel:"取消",Ok:"确定",'Now you can use the "utils" object to manipulate plug-ins in the browser console.':"现在你可以在浏览器控制台使用“utils”对象操作插件。"}},u=function(t,e){return c[t]&&c[t][e]||e};function h(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function l(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach((function(e){f(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function f(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,o){return e&&d(t.prototype,e),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var g=function(){function t(e){p(this,t),this.photoRoot=e.photoRoot}return m(t,[{key:"getPhotoMask",value:function(){return this.photoRoot?this.photoRoot.getEventList("PhotoMask"):null}},{key:"getPhotoMain",value:function(){return this.photoRoot?this.photoRoot.getEventList("PhotoMain"):null}},{key:"cut",value:function(t,e,o){if(!this.photoRoot)return null;var i=this.getPhotoMask();return i?"object"===v(t)?i.clip(null===t||void 0===t?void 0:t.maxPixel,null===t||void 0===t?void 0:t.encoderOptions,null===t||void 0===t?void 0:t.format):"number"===typeof t?i.clip(t,e,o):i.clip():null}},{key:"reset",value:function(){if(this.photoRoot){var t=this.getPhotoMain();null===t||void 0===t||t.reset()}}},{key:"setMaskRound",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.getPhotoMask();e&&(e.isRound=t)}}},{key:"setMaskSize",value:function(t,e){if(this.photoRoot){var o=this.getPhotoMask();null===o||void 0===o||o.reset(t,e)}}},{key:"setMaskSizeToOriginal",value:function(){if(this.photoRoot){var t=this.getPhotoMain();return t?(this.setMaskSize(t.imgRect.w,t.imgRect.h),{width:t.imgRect.w,height:t.imgRect.h}):void 0}}},{key:"setMaskResize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.getPhotoMask();null===e||void 0===e||e.setResize(t)}}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot&&t%360!==0){var o=this.getPhotoMain();if(o){var i=o.showRect.r+t;return o.setAngle(i,e),i}}}},{key:"rotateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot){var o=this.getPhotoMain();o&&o.showRect.r+t%360&&o.setAngle(t,e)}}},{key:"setFlipV",value:function(t){if(this.photoRoot){var e=this.getPhotoMain();return e?(e.setFlipV(1===e.showRect.sV,t),-1===e.showRect.sV):void 0}}},{key:"setFlipH",value:function(t){if(this.photoRoot){var e=this.getPhotoMain();return e?(e.setFlipH(1===e.showRect.sH,t),-1===e.showRect.sH):void 0}}},{key:"setFlip",value:function(t,e,o){if(this.photoRoot){var i=this.getPhotoMain();null===i||void 0===i||i.setFlip(t,e,o)}}},{key:"scale",value:function(t){var e=this.getPhotoMain();null===e||void 0===e||e.scale(t)}},{key:"getOptions",value:function(){var t=this.photoRoot;if(!t)return null;var e,o,i=t.getEventList("PhotoMain"),n=t.getEventList("PhotoMask");if(i){var r,a=i.imgRect,s=i.showRect;e={src:null===(r=i.originalImg)||void 0===r?void 0:r.src,imgRect:l({},a),showRect:l({},s)},e.showRect.x-=e.showRect.w/2,e.showRect.y-=e.showRect.y/2}if(n){var c=n.getMaskRect();o={isRound:n.isRound,x:c.x-c.w/2,y:c.y-c.h/2,w:c.w,h:c.h}}return{canvas:{width:t.width,height:t.height,drawWidth:t.drawWidth,drawHeight:t.drawHeight,magnification:t.magnification},img:e||{},mask:o||{}}}}]),t}();function y(t){if(t&&t.photoRoot)return new g(t);throw new Error("createUtils需要一个为VuePictureCut实例的参数，但是当前得到的是".concat(t,'!\n\n      "createUtils" requires an argument for the "VuePictureCut" instance, but the current result is ').concat(t,"!"))}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e,o){return e&&R(t.prototype,e),o&&R(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function x(t){var e=C();return function(){var o,i=M(t);if(e){var n=M(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return P(this,o)}}function P(t,e){if(e&&("object"===b(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var E=function(t){_(o,t);var e=x(o);function o(){var t;return w(this,o),t=e.apply(this,arguments),t.config=u,t.language="EN",t.src="./demo.jpg",t.blob=null,t.base64=null,t.pictureCut=null,t.form={backgroundColor:void 0,maskColor:void 0,maskBorderColor:void 0,menuTheme:"default",isRound:!0,resize:!0,rotateControl:!0,zoom:.96,initAngle:void 0,width:4,height:5,maxPixel:void 0,encoderOptions:.8,format:"image/jpeg"},t}return k(o,[{key:"mskOption",get:function(){return{width:this.form.width||1,height:this.form.height||1,isRound:this.form.isRound,resize:this.form.resize,color:this.form.maskColor,borderColor:this.form.maskBorderColor}}},{key:"newSrc",get:function(){return this.blob?URL.createObjectURL(this.blob):""}},{key:"mounted",value:function(){this.pictureCut=this.$refs["pictureCut"],this.utils=window.utils=y(this.pictureCut)}},{key:"inputChange",value:function(t){return this.src=URL.createObjectURL(t),!1}},{key:"cutChange",value:function(t){var e=t.blob,o=t.base64;this.blob=e,this.base64=o}},{key:"reset",value:function(){this.utils.reset()}}]),o}(s["h"]);E=Object(a["a"])([s["a"]],E);var S=E,T=S,z=(o("7f7a"),o("2877")),A=Object(z["a"])(T,n,r,!1,null,null,null),L=A.exports,H=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vue-picture-cut",class:{_default:!t.backgroundColor},style:{"background-color":t.backgroundColor||"#fff"}},[o("div",{ref:"main",staticClass:"vue-picture-cut_main",class:[t.menuPosition],style:t.mainPosition},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"vue-picture-cut_main-loading"},[t._v("loading...")]),o("vue-picture-cut-canvas",{attrs:{loading:t.loading,angle:t.initAngle},on:{"update:loading":function(e){t.loading=e}}}),t._t("default",[o("vue-picture-cut-mask",t._b({},"vue-picture-cut-mask",t.mskOption,!1))])],2),o("div",{directives:[{name:"show",rawName:"v-show",value:t.thickness>0,expression:"thickness > 0"}],staticClass:"vue-picture-cut_menu-box",class:[t.menuPosition],style:t.memuPosition},[t._t("menu",[o("div",{staticClass:"vue-picture-cut_default-menu"},[t.rotateControl?o("div",{staticClass:"vue-picture-cut_slider"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),o("div",{staticClass:"vue-picture-cut_slider-box"},[o("div",{staticClass:"vue-picture-cut_slider-box-bar",style:{left:100*t.sliderAngle/361+50+"%"}},[o("div",{staticClass:"vue-picture-cut_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"° ")])])])]):t._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:t.src,expression:"src"}],staticClass:"vue-picture-cut_button",on:{click:t.sureCut}},[t._v("ok")])])])],2)])},B=[],V=document.createElement("canvas");V.style.display="none";var N=V.getContext("2d");function I(t,e,o,i,n){var r=.5*i,a=.5*n,s=.5522848,c=r*s,u=a*s;t.moveTo(e-r,o),t.bezierCurveTo(e-r,o-u,e-c,o-a,e,o-a),t.bezierCurveTo(e+c,o-a,e+r,o-u,e+r,o),t.bezierCurveTo(e+r,o+u,e+c,o+a,e,o+a),t.bezierCurveTo(e-c,o+a,e-r,o+u,e-r,o)}function F(t,e,o){var i=Math.sin(o*Math.PI/180),n=Math.cos(o*Math.PI/180),r=Math.pow(t,2)*Math.pow(i,2)+Math.pow(e,2)*Math.pow(n,2),a=2*(Math.pow(t,2)-Math.pow(e,2))*i*n,s=Math.pow(t,2)*Math.pow(n,2)+Math.pow(e,2)*Math.pow(i,2),c=-Math.pow(t,2)*Math.pow(e,2);return{A:r,B:a,C:s,F:c}}function D(t,e,o,i){var n=Math.pow(e,2)-4*t*o,r=Math.sqrt(4*o*i/n),a=Math.sqrt(4*t*i/n);return{x:-Math.abs(r),y:-Math.abs(a),w:2*Math.abs(r),h:2*Math.abs(a)}}function $(t,e,o){var i=Math.sqrt(t*t+e*e),n=Math.atan2(t,e),r=o*Math.PI/180+n;return{x:i*Math.sin(r),y:i*Math.cos(r)}}function J(t,e){var o=new Uint8Array(t),i=o.length,n=new Array(i);while(i--)n[i]=String.fromCharCode(o[i]);var r=n.join(""),a=window.btoa(r);return"data:"+e+";base64,"+a}function W(t){return new Promise((function(e,o){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var t=i.response,n=new FileReader;n.addEventListener("loadend",(function(i){i.target?"string"===typeof i.target.result?e(i.target.result):null!==i.target.result?J(i.target.result,t.type):o():o()})),n.readAsDataURL(t)}else o()},i.onerror=function(t){o(t)},i.send()}))}var X={rotatePoint:$,loadCrossDomainImg:W,cloneJSON:function(t){return JSON.parse(JSON.stringify(t))},loadImg:function(t){return new Promise((function(e,o){var i=new Image;i.addEventListener("load",(function(){e&&e(i)})),i.addEventListener("error",(function(){o&&o(i)})),i.src=t}))},clipBy:function(t,e,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg",a=arguments.length>6?arguments[6]:void 0,s=i.x,c=i.y,u=i.w,h=i.h,l=i.r,f=i.sH,v=i.sV;return V.width=e,V.height=o,N.clearRect(0,0,e,o),N.save(),N.translate(e/2,o/2),"image/jpeg"!==r&&"image/jpg"!==r||(N.fillStyle="#fff",N.fillRect(-e/2,-o/2,e,o)),a&&a(N,e,o),l/360&&N.rotate(-l*Math.PI/180),N.translate(s+u/2,c+h/2),N.scale(f,v),N.drawImage(t,0,0,t.width,t.height,-u/2,-h/2,u,h),N.scale(f,v),N.translate(-s-u/2-e/2,-c-h/2-o/2),N.restore(),V.toDataURL(r,n)},clipByRound:function(t,e,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg";return this.clipBy(t,e,o,i,n,r,(function(t){t.beginPath(),I(t,0,0,e,o),t.clip(),t.closePath()}))},clipByMax:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.width>e||t.height>e){var i=t.width/t.height,n=t.width,r=t.height;t.width>e&&(n=e,r=n/i),t.height>e&&(r=e,n=r*i);var a={x:-n/2,y:-r/2,w:n,h:r,r:0,sV:1,sH:1},s=this.clipBy(t,n,r,a,o);return{src:s,file:this.base64ToBlob(s)}}},base64ToBlob:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";if(!window.atob)return null;for(var o=window.atob(t.split(",")[1]),i=new ArrayBuffer(o.length),n=new Uint8Array(i),r=0,a=o.length;r<a;r++)n[r]=255&o.charCodeAt(r);var s=null;try{s=new Blob([n],{type:e})}catch(l){var c=window,u=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder;if("TypeError"===l.name&&u){var h=new u;h.append(n.buffer),s=h.getBlob(e)}else"InvalidStateError"===l.name&&(s=new Blob([i],{type:e}))}return s},doubleTouche:function(t,e){if(void 0===e)return{core:{x:t.x,y:t.y},length:0,lengthX:0,lengthY:0,angle:0};var o={x:(t.x+e.x)/2,y:(t.y+e.y)/2},i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),a=180*Math.acos(i/r)/Math.PI;return{core:o,length:r,lengthX:i,lengthY:n,angle:a}},getEllipseRectByRect:function(t,e,o){if(!(o/180))return{x:-t/2,y:-e/2,w:t,h:e};var i=t/2,n=e/2,r=F(i,n,o),a=r.A,s=r.B,c=r.C,u=r.F;return D(a,s,c,u)},getRectByRect:function(t,e,o){if(!(o/180))return{x:-t/2,y:-e/2,w:t,h:e};var i=$(-t/2,-e/2,o),n=$(t/2,-e/2,o),r=Math.max(Math.abs(i.x),Math.abs(n.x)),a=Math.max(Math.abs(i.y),Math.abs(n.y));return{x:-r,y:-a,w:r+r,h:a+a}}};function q(t,e){var o="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=Y(t))||e&&t&&"number"===typeof t.length){o&&(t=o);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function Y(t,e){if(t){if("string"===typeof t)return U(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function K(t,e,o){return e&&G(t.prototype,e),o&&G(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var Q=function(){function t(){Z(this,t),this.debug=!1,this.isFirefox=navigator.userAgent.indexOf("Firefox")>0,this.eventList=new Map,this.priorityEvent=null,this.wheelTime=0,this.wheelTimeOut=0,this.wheelstatus=!1}return K(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;this.root=t,this.width=t.offsetWidth,this.height=t.offsetHeight,this.drawWidth=Math.floor(this.width*e),this.drawHeight=Math.floor(this.height*e),this.magnification=e,this.core={x:Math.floor(this.drawWidth/2),y:Math.floor(this.drawHeight/2)},this._eventInit()}},{key:"cursor",set:function(t){this.root.style.cursor=t}},{key:"addEventList",value:function(t){this.eventList.set(t.className,t)}},{key:"getEventList",value:function(t){var e=this.eventList.get(t);return e||null}},{key:"deleteEventList",value:function(t){this.eventList.delete(t)}},{key:"setPriority",value:function(t){this.priorityEvent||(this.priorityEvent=t)}},{key:"getPriority",value:function(){return this.priorityEvent?this.priorityEvent:null}},{key:"deletePriority",value:function(t){this.priorityEvent&&this.priorityEvent.className===t&&(this.priorityEvent=null)}},{key:"_eventInit",value:function(){var t=this;this.root.addEventListener("touchstart",(function(e){var o=e||window.event;o.preventDefault();var i=o.changedTouches;t._touchStart(i)}),!1),this.root.addEventListener("touchend",(function(e){var o=e||window.event;o.preventDefault();var i=o.changedTouches;t._touchEnd(i)}),!1),this.root.addEventListener("touchmove",(function(e){var o=e||window.event;o.preventDefault();var i=o.changedTouches;t._touchMove(i)}),!1),this.root.addEventListener("mousedown",(function(e){var o=e||window.event;o.preventDefault(),t._mouseDown(o)}),!1),this.root.addEventListener("mouseup",(function(e){var o=e||window.event;o.preventDefault(),t._mouseUp(o)}),!1),this.root.addEventListener("mouseleave",(function(e){var o=e||window.event;o.preventDefault(),t._mouseUp(o)}),!1),this.root.addEventListener("mousemove",(function(e){var o=e||window.event;o.preventDefault(),t._mouseMove(o)}),!1),this.isFirefox?this.root.addEventListener("DOMMouseScroll",(function(e){var o=e||window.event;o.preventDefault();var i=-40*o.detail;t._mouseWheel(i,{x:o.layerX*t.magnification-t.core.x,y:o.layerY*t.magnification-t.core.y})}),!1):this.root.addEventListener("mousewheel",(function(e){var o=e||window.event;o.preventDefault();var i=o.wheelDelta||o.detail;t._mouseWheel(i,{x:o.offsetX*t.magnification-t.core.x,y:o.offsetY*t.magnification-t.core.y})}),!1)}},{key:"_touchStart",value:function(t){var e=this,o=Array.from(t).map((function(t){return e._getTouchePoint(t)}));if(this.priorityEvent)this.priorityEvent.touchStart(X.cloneJSON(o));else{var i,n=[],r=q(this.eventList.values());try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.touchStart(X.cloneJSON(o)),this.priorityEvent)break;n.push(a)}}catch(s){r.e(s)}finally{r.f()}this.priorityEvent&&n.forEach((function(t){return t.touchEnd(X.cloneJSON(o))}))}}},{key:"_touchEnd",value:function(t){var e=this,o=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchEnd(X.cloneJSON(o)):this.eventList.forEach((function(t){return t.touchEnd(X.cloneJSON(o))}))}},{key:"_touchMove",value:function(t){var e=this,o=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchMove(X.cloneJSON(o)):this.eventList.forEach((function(t){return t.touchMove(X.cloneJSON(o))}))}},{key:"_mouseDown",value:function(t){var e=[this._getMousePoint(t)];if(this.priorityEvent)this.priorityEvent.touchStart(X.cloneJSON(e));else{var o,i=[],n=q(this.eventList.values());try{for(n.s();!(o=n.n()).done;){var r=o.value;if(r.touchStart(X.cloneJSON(e)),this.priorityEvent)break;i.push(r)}}catch(a){n.e(a)}finally{n.f()}this.priorityEvent&&i.forEach((function(t){return t.touchEnd(X.cloneJSON(e))}))}}},{key:"_mouseUp",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchEnd(X.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchEnd(X.cloneJSON(e))}))}},{key:"_mouseMove",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchMove(X.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchMove(X.cloneJSON(e))}))}},{key:"_mouseWheel",value:function(t,e){var o=this;clearTimeout(this.wheelTimeOut);var i=Date.now(),n=i-this.wheelTime>400&&!this.wheelstatus;n&&(this.wheelstatus=!0,this._wheelStart(t,e)),this.wheelTime=i,this.wheelTimeOut=setTimeout((function(){o.wheelstatus=!1,o._wheelEnd(t,e)}),400),n||this._wheelChange(t,e)}},{key:"_wheelStart",value:function(t,e){if(this.priorityEvent)this.priorityEvent.wheelStart(t,X.cloneJSON(e));else{var o,i=[],n=q(this.eventList.values());try{for(n.s();!(o=n.n()).done;){var r=o.value;if(r.wheelStart(t,X.cloneJSON(e)),this.priorityEvent)break;i.push(r)}}catch(a){n.e(a)}finally{n.f()}this.priorityEvent&&i.forEach((function(o){return o.wheelEnd(t,X.cloneJSON(e))}))}}},{key:"_wheelChange",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelChange(t,X.cloneJSON(e)):this.eventList.forEach((function(o){return o.wheelChange(t,X.cloneJSON(e))}))}},{key:"_wheelEnd",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelEnd(t,X.cloneJSON(e)):this.eventList.forEach((function(o){return o.wheelEnd(t,X.cloneJSON(e))}))}},{key:"_getTouchePoint",value:function(t){var e=this._getClientPosition(this.root,{x:0,y:0});return{x:(t.clientX-e.x)*this.magnification-this.core.x,y:(t.clientY-e.y)*this.magnification-this.core.y,id:t.identifier}}},{key:"_getMousePoint",value:function(t){return{x:(this.isFirefox?t.layerX:t.offsetX)*this.magnification-this.core.x,y:(this.isFirefox?t.layerY:t.offsetY)*this.magnification-this.core.y,id:0}}},{key:"_getClientPosition",value:function(t,e){var o=t.getBoundingClientRect();return e.x+=o.left,e.y+=o.top,e}}]),t}(),tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("canvas",{staticClass:"vue-picture-cut_canvas"})},et=[];function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e,o){return e&&it(t.prototype,e),o&&it(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var rt={linear:[[0,0],[1,1]],ease:[[0,0],[.25,.1],[1,1]],"ease-in":[[0,0],[.42,0],[1,1]],"ease-out":[[0,0],[.58,1],[1,1]],"ease-in-out":[[0,0],[.42,0],[.58,1],[1,1]]},at=function(){function t(){ot(this,t),this.bezierCtrlNodesArr=[]}return nt(t,[{key:"setOpt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.bezierCtrlNodesArr=t,this}},{key:"getPoint",value:function(t){var e=this,o=this.bezierCtrlNodesArr,i=o.length-1,n=0,r=0;return o.forEach((function(o,a){a?(n+=e.factorial(i)/e.factorial(a)/e.factorial(i-a)*o[0]*Math.pow(1-t,i-a)*Math.pow(t,a),r+=e.factorial(i)/e.factorial(a)/e.factorial(i-a)*o[1]*Math.pow(1-t,i-a)*Math.pow(t,a)):(n+=o[0]*Math.pow(1-t,i-a)*Math.pow(t,a),r+=o[1]*Math.pow(1-t,i-a)*Math.pow(t,a))})),{x:n,y:r}}},{key:"factorial",value:function(t){return t<=1?1:t*this.factorial(t-1)}}]),t}();function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ut(t,e,o){return e&&ct(t.prototype,e),o&&ct(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(){for(var t=0,e=["webkit","moz"],o=0;o<e.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[e[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[o]+"CancelAnimationFrame"]||window[e[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var o=(new Date).getTime(),i=Math.max(0,16.7-(o-t)),n=window.setTimeout((function(){e(o+i)}),i);return t=o+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();var ht=function(){function t(e){st(this,t),this.bezier=new at,this.duration=1e3,this.timing=[],this.delay=0,this.iteration=1,this.direction="normal",this.change=function(){return!1},this.end=function(){},this.startTime=0,this.id=0,void 0!==e.duration&&(this.duration=e.duration),void 0!==e.timing&&("string"===typeof e.timing?this.timing=rt[e.timing]||rt["linear"]:this.timing=e.timing),void 0!==e.delay&&(this.delay=e.delay),void 0!==e.iteration&&(this.iteration=e.iteration),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.change&&(this.change=e.change),void 0!==e.end&&(this.end=e.end);var o="infinite"===this.iteration?9999999999999:this.iteration*this.duration;this.times="alternate"===this.direction||"alternate-reverse"===this.direction?2*o:o,this.bezier.setOpt(this.timing)}return ut(t,[{key:"start",value:function(){var t=this;return this.startTime=0,this.delay?setTimeout((function(){t.startTime=Date.now(),t._do()}),this.delay):(this.startTime=Date.now(),this._do()),this}},{key:"_do",value:function(){var t=this;this.id=requestAnimationFrame((function(){var e=Date.now()-t.startTime,o=e/t.duration,i=parseInt(String(o));switch(o-=i,t.direction){case"normal":o=e<t.times?o:1;break;case"reverse":o=e<t.times?1-o:0;break;case"alternate":o=i%2?e<t.times?1-o:0:e<t.times?o:1,i/2===t.iteration&&(o=0);break;case"alternate-reverse":o=i%2?e<t.times?o:1:e<t.times?1-o:0,i/2===t.iteration&&(o=1);break}var n=t.bezier.getPoint(o),r=n.x,a=n.y,s=t.change(r,a);!1!==s&&e<t.times?t._do():t.end()}))}},{key:"abort",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.id>0&&cancelAnimationFrame(this.id),this.id=0,t&&this.end()}}]),t}();function lt(t){return new ht(t)}function ft(t,e){return gt(t)||mt(t,e)||pt(t,e)||vt()}function vt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pt(t,e){if(t){if("string"===typeof t)return dt(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function mt(t,e){var o=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,n,r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(i=o.next()).done);a=!0)if(r.push(i.value),e&&r.length===e)break}catch(c){s=!0,n=c}finally{try{a||null==o["return"]||o["return"]()}finally{if(s)throw n}}return r}}function gt(t){if(Array.isArray(t))return t}function yt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function bt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(o),!0).forEach((function(e){wt(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):yt(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function wt(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _t(t,e,o){return e&&kt(t.prototype,e),o&&kt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ot=function(){function t(e,o){Rt(this,t),this.className="PhotoMain",this.imgRect={x:0,y:0,w:0,h:0},this.showRect={x:0,y:0,w:0,h:0,r:0,sV:1,sH:1},this.moveRect={minX:null,minY:null,maxX:null,maxY:null},this.touchList=[],this.status=null,this.touchstartPoint={x:0,y:0},this.touchstartEvent=X.doubleTouche({x:0,y:0,id:0}),this.animation=void 0,this.scaleTimer=null,this.loadImgEd=new Map,e.width=o.drawWidth,e.height=o.drawHeight,o.addEventList(this),this.root=o,this.canvas=e,this.ctx=e.getContext("2d"),this.ctx.translate(this.root.core.x,this.root.core.y)}return _t(t,[{key:"setSrc",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showRect.r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.clear(),this.src=t,this.loadingEvent&&this.loadingEvent(!0),X.loadImg(t).then((function(t){i||(e.originalImg=t);var n=X.clipByMax(t,1500);if(n)e.setSrc(n.src,o,++i);else{if(e.img=t,e._initRect(),e.showRect.r=o,e.moveRect.minX&&e.moveRect.minY){e.loadImgEd.forEach((function(t){t&&t()}));var r=e.showRect,a=r.x,s=r.y,c=r.w,u=r.h,h=r.r,l=r.sV,f=r.sH,v=e._checkRange({x:a,y:s,w:c,h:u,r:h,sV:l,sH:f});e.showRect={x:a+v[0],y:s+v[1],w:c+v[2],h:u+v[3],r:h,sV:l,sH:f}}else e._initMoveRange();e._draw(e.imgRect,e.showRect),e.showRect.r=o,e.loadingEvent&&e.loadingEvent(!1),e.root.onPhotoChange&&e.root.onPhotoChange({target:e,type:"imageInit"})}}),(function(){e.loadingEvent&&e.loadingEvent(!1)}))}},{key:"reset",value:function(){if(this.img){if(this._initRect(),this.showRect.r=0,this.showRect.sV=1,this.showRect.sH=1,this.moveRect.minX&&this.moveRect.minY){this.loadImgEd.forEach((function(t){t&&t()}));var t=this.showRect,e=t.x,o=t.y,i=t.w,n=t.h,r=t.r,a=t.sV,s=t.sH,c=this._checkRange();this.showRect={x:e+c[0],y:o+c[1],w:i+c[2],h:n+c[3],r:r,sV:a,sH:s}}else this._initMoveRange();this._draw(this.imgRect,this.showRect),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageReset"})}}},{key:"setMoveRange",value:function(t,e,o,i,n,r){if(this._initMoveRange(t,e,o,i),!this.img)return[0,0,0,0];if(n&&r){var a=this.showRect,s=a.x,c=a.y,u=a.w,h=a.h,l=a.r,f=a.sV,v=a.sH,p=n.x-s,d=n.y-c,m=u*r-u,g=h*r-h,y=this._checkRange(bt(bt({},n),{},{w:u*r,h:h*r,r:l,sV:f,sH:v}));return[p+y[0],d+y[1],m+y[2],g+y[3]]}var b=this._checkRange(),w=ft(b,4),R=w[0],k=w[1],_=w[2],O=w[3];return[R,k,_,O]}},{key:"setAngle",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.img?(o&&this.animation&&this.animation.abort(),this.loadImgEd.forEach((function(i){i&&i({showRect:bt(bt({},e.showRect),{},{r:t})},o)})),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageAngle"})):this.showRect.r=t}},{key:"setFlip",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===this.showRect.sH,n=-1===this.showRect.sV;if(i!==e||n!==t){var r;if(this.img)if(o)null===(r=this.animation)||void 0===r||r.abort(),this.doAnimation(0,0,0,0,0,t,e);else this.showRect.sV=t?-1:1,this.showRect.sH=e?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlip"})}}},{key:"setFlipV",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=-1===this.showRect.sV;if(o!==t&&this.img){var i;if(e)null===(i=this.animation)||void 0===i||i.abort(),this.doAnimation(0,0,0,0,0,t);else this.showRect.sV=t?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlipV"})}}},{key:"setFlipH",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=-1===this.showRect.sH;if(o!==t&&this.img){var i;if(e)null===(i=this.animation)||void 0===i||i.abort(),this.doAnimation(0,0,0,0,0,void 0,t);else this.showRect.sH=t?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlipH"})}}},{key:"scale",value:function(t){var e,o=this;if(this.img&&!(t<0)&&1!==t){null!==this.scaleTimer&&clearTimeout(this.scaleTimer),null===(e=this.animation)||void 0===e||e.abort(),this.touchstartPoint={x:0,y:0};var i=this._changePointByCanvas(this.showRect);this._scaleByZoom(t,i),this._draw(this.imgRect,this.showRect),this.scaleTimer=setTimeout((function(){var t=o._checkRange(),e=ft(t,4),i=e[0],n=e[1],r=e[2],a=e[3];o.doAnimation(i,n,r,a,0)}),500)}}},{key:"onLoading",value:function(t){this.loadingEvent=t}},{key:"setShowRect",value:function(t){this.img&&(this.showRect=t,this._draw(this.imgRect,this.showRect))}},{key:"_changePointByCanvas",value:function(t){var e=this.showRect.r;return X.rotatePoint(t.x,t.y,e)}},{key:"_changePointByImage",value:function(t){var e=this.showRect.r;return X.rotatePoint(t.x,t.y,-e)}},{key:"_initRect",value:function(){var t=this.img;if(t){var e=this.root.drawWidth,o=this.root.drawHeight,i=t.width/e,n=t.height/o,r=i<n?n:i,a=t.width/r,s=t.height/r;this.imgRect={x:0,y:0,w:t.width,h:t.height},this.showRect={x:0,y:0,w:a,h:s,r:this.showRect.r,sV:this.showRect.sV,sH:this.showRect.sH}}}},{key:"_initMoveRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===t||null===e||null===o||null===i){var n=this.imgRect,r=n.w,a=n.h;if(0===r)return;var s=this.root.drawWidth,c=this.root.drawHeight,u=s/c,h=r/a;if(u>h){var l=c*h,f=c;t=-l/2,e=-f/2}else{var v=s,p=s/h;t=-v/2,e=-p/2}o=-t,i=-e,this.moveRect={minX:t,minY:e,maxX:o,maxY:i}}else this.moveRect={minX:t,minY:e,maxX:o,maxY:i}}},{key:"_draw",value:function(t,e){if(this.clear(),this.img){var o=e.x,i=e.y,n=e.w,r=e.h,a=e.r,s=e.sV,c=e.sH,u=this.ctx;if(u.save(),u.rotate(-a*Math.PI/180),u.translate(o,i),u.scale(c,s),u.drawImage(this.img,t.x,t.y,t.w,t.h,-n/2,-r/2,n,r),u.scale(-c,-s),u.translate(-o,-i),this.root.debug){u.strokeStyle="#0f0",u.lineWidth=2;for(var h=0;h<this.root.drawHeight/200;h++)u.beginPath(),u.moveTo(-this.root.core.x,100*h+50),u.lineTo(this.root.core.x,100*h+50),u.stroke(),u.closePath(),u.beginPath(),u.moveTo(-this.root.core.x,100*-h-50),u.lineTo(this.root.core.x,100*-h-50),u.stroke(),u.closePath();for(var l=0;l<this.root.drawWidth/200;l++)u.beginPath(),u.moveTo(100*l+50,-this.root.core.y),u.lineTo(100*l+50,this.root.core.y),u.stroke(),u.closePath(),u.beginPath(),u.moveTo(100*-l-50,-this.root.core.y),u.lineTo(100*-l-50,this.root.core.y),u.stroke(),u.closePath();null!==this.moveRect.minX&&null!==this.moveRect.maxX&&null!==this.moveRect.minY&&null!==this.moveRect.maxY&&(u.strokeStyle="#00f",u.fillStyle="rgba(0,0,0,0)",u.lineWidth=2,u.strokeRect(this.moveRect.minX,this.moveRect.minY,this.moveRect.maxX-this.moveRect.minX,this.moveRect.maxY-this.moveRect.minY)),u.beginPath(),u.fillStyle="#fff",u.arc(0,0,6,0,2*Math.PI),u.fill(),u.closePath()}u.restore()}}},{key:"clear",value:function(){this.ctx.clearRect(-this.root.core.x,-this.root.core.y,this.root.drawWidth,this.root.drawHeight)}},{key:"touchEnd",value:function(t){this.img&&this.touchList.length&&(t=this.touchList.filter((function(e){return e.id!==t[0].id})),0===t.length?this.wheelEnd():1===t.length&&this._touchStart1(t[0]),this.touchList=t)}},{key:"touchMove",value:function(t){if(this.img)if(1===t.length)this._touchMove1(t[0]);else if(2===t.length)this._touchMove2(t[0],t[1]);else if(t.length>2){var e=this.touchList.map((function(t){return t.id}));t=t.filter((function(t){return e.indexOf(t.id)>-1})),2===t.length&&this._touchMove2(t[0],t[1])}}},{key:"touchStart",value:function(t){var e;if(this.img){null===(e=this.animation)||void 0===e||e.abort();var o=t[0];this.touchList.length?1===this.touchList.length&&this.touchList[0].id!==o.id&&(this.touchList.push(o),this._touchStart2(this.touchList[0],this.touchList[1])):(this.touchList.push(o),this._touchStart1(o))}}},{key:"wheelStart",value:function(t,e){this.img&&(this.status="scale",this.wheelChange(t,e))}},{key:"wheelChange",value:function(t,e){var o;if(this.img){null===(o=this.animation)||void 0===o||o.abort(),this.touchstartEvent=X.doubleTouche(e);var i=this.touchstartEvent.core,n=this._changePointByImage(i);this.touchstartPoint=this._getPointerLocation(n),this.root.setPriority(this),t=1+5e-4*t,t=t>1.08?1.08:t<.92593?.92593:t,this._scaleByZoom(t,e),this._draw(this.imgRect,this.showRect)}}},{key:"wheelEnd",value:function(){if(this.img){this.status=null,this.touchstartEvent=X.doubleTouche({x:0,y:0,id:0}),this.touchstartPoint={x:0,y:0};var t=this._checkRange(),e=ft(t,4),o=e[0],i=e[1],n=e[2],r=e[3];(o||i||n||r)&&this.doAnimation(o,i,n,r,0),this.root.deletePriority(this.className)}}},{key:"_touchStart1",value:function(t){this.status="move",this.touchstartEvent=X.doubleTouche(t);var e=this._changePointByImage(t);this.touchstartPoint=this._getPointerLocation(e)}},{key:"_touchStart2",value:function(t,e){var o=this.showRect,i=o.sV,n=o.sH;this.status="scale",this.touchstartEvent=!i&&n||i&&!n?X.doubleTouche(e,t):X.doubleTouche(t,e);var r=this.touchstartEvent.core,a=this._changePointByImage(r);this.touchstartPoint=this._getPointerLocation(a),this.root.setPriority(this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageTouchStart2"})}},{key:"_touchMove1",value:function(t){"move"===this.status&&(this.root.setPriority(this),this.touchList[0]=t,this._move(t),this._draw(this.imgRect,this.showRect),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageMove"}))}},{key:"_touchMove2",value:function(t,e){if("scale"===this.status){this.touchList=[t,e];var o=X.doubleTouche(t,e);this._scaleByLocation(o),this._draw(this.imgRect,this.showRect)}}},{key:"_getPointerLocation",value:function(t){return{x:t.x-this.showRect.x,y:t.y-this.showRect.y}}},{key:"_move",value:function(t){var e=this.touchstartPoint,o=this._changePointByImage(t);this.showRect.x=o.x-e.x,this.showRect.y=o.y-e.y}},{key:"_scaleByLocation",value:function(t){var e=t.length/this.touchstartEvent.length;e=e<.9091?.9091:e,e=e>1.1?1.1:e,this._scaleByZoom(e,t.core),this.touchstartEvent=t}},{key:"_scaleByZoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.touchstartPoint;this.touchstartPoint={x:i.x*t,y:i.y*t},i=this.touchstartPoint;var n=this.showRect,r=n.w,a=n.h,s=n.r,c=n.sV,u=n.sH,h=this._changePointByImage(e),l=this.showRect={x:h.x-i.x,y:h.y-i.y,w:r*t,h:a*t,r:s+o,sV:c,sH:u},f=this._checkRange(l),v=ft(f,4),p=v[0],d=v[1],m=v[2],g=v[3],y=p||d||m||g;y&&(this.showRect=this._getShowRect(p,d,m,g,0)),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageScale"}),y&&(this.showRect=l)}},{key:"_checkRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showRect,e=t.x,o=t.y,i=t.w,n=t.h;e-=i/2,o-=n/2;var r=this.moveRect,a=r.minX,s=r.minY,c=r.maxX,u=r.maxY;a=a||0,s=s||0,c=c||0,u=u||0;var h=e,l=o,f=i,v=n,p=this._getPohtoByRangeLocation([e,o,i,n]),d=i/n;p[4]<=0&&(f=c-a,v=f/d,h=e+(i-f)/2,l=o+(n-v)/2),p=this._getPohtoByRangeLocation([h,l,f,v]),p[5]<=0&&(v=u-s,f=v*d,h=e+(i-f)/2,l=o+(n-v)/2),p=this._getPohtoByRangeLocation([h,l,f,v]),p[0]>0&&(h-=p[0]),p[1]>0&&(l-=p[1]),p[2]<0&&(h-=p[2]),p[3]<0&&(l-=p[3]);var m=f-i,g=v-n;return[h-e+m/2,l-o+g/2,m,g]}},{key:"_getPohtoByRangeLocation",value:function(t){var e=this.showRect,o=e.x,i=e.y,n=e.w,r=e.h,a=this.moveRect,s=a.minX,c=a.minY,u=a.maxX,h=a.maxY;if(t){var l=ft(t,4);o=l[0],i=l[1],n=l[2],r=l[3]}return[o-(s||0),i-(c||0),o+n-(u||0),i+r-(h||0),n-(u||0)+(s||0),r-(h||0)+(c||0)]}},{key:"_getShowRect",value:function(t,e,o,i,n,r,a){var s=this.showRect,c=s.x,u=s.y,h=s.w,l=s.h,f=s.r,v=s.sV,p=s.sH;return r=void 0===r?-1===v:r,a=void 0===a?-1===p:a,{x:c+t,y:u+e,w:h+o,h:l+i,r:f+n,sV:r?-1:1,sH:a?-1:1}}},{key:"doAnimation",value:function(t,e,o,i,n,r,a,s){var c=this;if(t||e||o||i||n||void 0!==r||void 0!==a){var u=this.showRect,h=u.x,l=u.y,f=u.w,v=u.h,p=u.r,d=u.sV,m=u.sH,g=this._getShowRect(t,e,o,i,n,r,a),y=g.sV-d,b=g.sH-m;(t||e||o||i||n||b||y)&&(this._showRect=this.showRect,this.showRect=g,this.animation=lt({duration:300,timing:"ease-in-out",change:function(r,a){c._showRect={x:h+a*t,y:l+a*e,w:f+a*o,h:v+a*i,r:p+a*n,sV:d+a*y,sH:m+a*b},c._draw(c.imgRect,c._showRect)},end:function(){c._showRect&&(c.showRect=c._showRect,c._showRect=void 0),s&&s()}}).start())}}}]),t}();function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ct(t,e,o){return e&&jt(t.prototype,e),o&&jt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}function Et(t,e){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Et(t,e)}function St(t){var e=At();return function(){var o,i=Lt(t);if(e){var n=Lt(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return Tt(this,o)}}function Tt(t,e){if(e&&("object"===xt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lt(t)}var Ht=function(t){Mt(o,t);var e=St(o);function o(){var t;return Pt(this,o),t=e.apply(this,arguments),t.photoMain=null,t}return Ct(o,[{key:"photoRoot",get:function(){var t;return null===(t=this.cutRoot)||void 0===t?void 0:t.photoRoot}},{key:"watchAngle",value:function(t){this.photoMain&&void 0!==t&&this.photoMain.setAngle(t,!0)}},{key:"created",value:function(){this.cutRoot=this.getCutRoot()}},{key:"mounted",value:function(){var t=this;setTimeout((function(){t.photoMain=new Ot(t.$el,t.photoRoot),t.photoMain.onLoading((function(e){t._loading=e}))}),0)}}]),o}(s["h"]);Object(a["a"])([Object(s["d"])({type:Number,required:!1})],Ht.prototype,"angle",void 0),Object(a["a"])([Object(s["e"])("loading",{type:Boolean,default:!1})],Ht.prototype,"_loading",void 0),Object(a["a"])([Object(s["i"])("angle")],Ht.prototype,"watchAngle",null),Object(a["a"])([Object(s["c"])("getCutRoot")],Ht.prototype,"getCutRoot",void 0),Ht=Object(a["a"])([Object(s["a"])({name:"VuePictureCutCanvas"})],Ht);var Bt=Ht,Vt=Bt,Nt=Object(z["a"])(Vt,tt,et,!1,null,null,null),It=Nt.exports,Ft=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("svg",{staticClass:"vue-picture-cut_mask",attrs:{preserveAspectRatio:"none",viewBox:t.viewBox}},[o("path",{staticClass:"cls-1",attrs:{fill:t.color||"rgba(0,0,0,.5)",d:"M0,0 H"+t.drawWidth+" V"+t.drawHeight+" H0 V0 Z "+t.round}}),t.thisResize||!t.thisRound?o("rect",t._b({staticClass:"cls-3",style:{"stroke-dasharray":t.border,stroke:t.thisRound?"rgba(255,255,255,.7)":t.borderColor||"#ff5500"}},"rect",t.rect,!1)):t._e(),t.thisRound?o("path",{staticClass:"cls-2",attrs:{stroke:t.borderColor||"#ff5500",d:t.round}}):t._e(),t.thisResize?o("path",{staticClass:"cls-4",attrs:{d:t.TLHorn}}):t._e(),t.thisResize?o("path",{staticClass:"cls-4",attrs:{d:t.TRHorn}}):t._e(),t.thisResize?o("path",{staticClass:"cls-4",attrs:{d:t.BLHorn}}):t._e(),t.thisResize?o("path",{staticClass:"cls-4",attrs:{d:t.BRHorn}}):t._e(),t.cutRoot&&t.cutRoot.cutSize?o("text",{staticClass:"text",attrs:{x:t.rect.x,y:t.rect.y-10}},[t._t("text",[t._v(" "+t._s(t.cutRoot.cutSize.w+" x "+t.cutRoot.cutSize.h)+" ")])],2):t._e()])},Dt=[];function $t(t,e){return Yt(t)||qt(t,e)||Wt(t,e)||Jt()}function Jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wt(t,e){if(t){if("string"===typeof t)return Xt(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Xt(t,e):void 0}}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function qt(t,e){var o=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,n,r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(i=o.next()).done);a=!0)if(r.push(i.value),e&&r.length===e)break}catch(c){s=!0,n=c}finally{try{a||null==o["return"]||o["return"]()}finally{if(s)throw n}}return r}}function Yt(t){if(Array.isArray(t))return t}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zt(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gt(t,e,o){return e&&Zt(t.prototype,e),o&&Zt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var Kt=new Map([["Top Left","nw-resize"],["Top Right","ne-resize"],["Bottom Left","sw-resize"],["Bottom Right","se-resize"],["Top","n-resize"],["Left","w-resize"],["Right","e-resize"],["Bottom","s-resize"]]),Qt=function(){function t(e,o,i,n,r){var a=this;Ut(this,t),this.className="PhotoMask",this._isRound=!1,this.touche=null,this.touchePosition=void 0,this.animation=void 0,e.addEventList(this),this.root=e,this.width=o||1,this.height=i||1,this.resize=n,this.faultTolerant=8*e.magnification;var s=this.maskRect=this._getMaskRect();this._draw=r,r(this.maskRect,!1,this);var c=this.root.getEventList("PhotoMain");c&&(c.loadImgEd.set(this.className,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return a._reset(c,t,e)})),c.setMoveRange(s.x,s.y,s.x+s.w,s.y+s.h))}return Gt(t,[{key:"getMaskRect",value:function(){return this.maskRect}},{key:"_reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object.assign({},t,e),n=this._getMaskRect(),r=i.showRect,a=this._isRound?X.getEllipseRectByRect(n.w,n.h,r.r):X.getRectByRect(n.w,n.h,r.r),s=t.setMoveRange(a.x,a.y,a.x+a.w,a.y+a.h),c=$t(s,4),u=c[0],h=c[1],l=c[2],f=c[3];o?t.doAnimation(u,h,l,f,r.r-t.showRect.r):t.setShowRect({x:r.x+u,y:r.y+h,w:r.w+l,h:r.h+f,r:r.r,sV:r.sV,sH:r.sH})}},{key:"reset",value:function(t,e){this.width=t||1,this.height=e||1;var o=this._getMaskRect(),i=o.x-this.maskRect.x,n=o.y-this.maskRect.y,r=o.w-this.maskRect.w,a=o.h-this.maskRect.h,s=this.root.getEventList("PhotoMain");if(s){var c=s.showRect,u=o.w/this.maskRect.w,h=X.rotatePoint(this.maskRect.x+this.maskRect.w/2,this.maskRect.y+this.maskRect.h/2,-c.r),l={x:(c.x-h.x)*u,y:(c.y-h.y)*u},f=this._isRound?X.getEllipseRectByRect(o.w,o.h,c.r):X.getRectByRect(o.w,o.h,c.r),v=s.setMoveRange(f.x,f.y,f.x+f.w,f.y+f.h,l,u),p=$t(v,4),d=p[0],m=p[1],g=p[2],y=p[3];s.doAnimation(d,m,g,y,0)}this._animation(i,n,r,a),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskReset"})}},{key:"isRound",get:function(){return this._isRound},set:function(t){this._isRound=t,this._draw(this.maskRect,!1,this),this.reset(this.maskRect.w,this.maskRect.h)}},{key:"setResize",value:function(t){t||this.touchEnd(),this.resize=t,this._draw(this.maskRect,!1,this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskResize"})}},{key:"getResize",value:function(){return this.resize}},{key:"getCutInfo",value:function(t){var e=this.root.getEventList("PhotoMain");if(!e||!e.originalImg||!e.img)return null;var o,i=e.originalImg,n=e.showRect,r=this.maskRect;if(t){var a=r.w/r.h;o=a<1?t*a/r.w:t/r.w}else o=i.width/n.w;var s={w:Math.round(r.w*o),h:Math.round(r.h*o)},c={x:(n.x-n.w/2)*o,y:(n.y-n.h/2)*o,w:n.w*o,h:n.h*o,r:n.r,sV:n.sV,sH:n.sH};return{cutSize:s,showInfo:c}}},{key:"clip",value:function(t,e,o){var i=this.root.getEventList("PhotoMain");if(!i||!i.originalImg||!i.img)return null;var n=i.originalImg,r=this.getCutInfo(t),a=r.cutSize,s=r.showInfo,c=this._isRound?X.clipByRound(n,a.w,a.h,s,e,o):X.clipBy(n,a.w,a.h,s,e,o);return{src:c,file:X.base64ToBlob(c)}}},{key:"_getMaskRect",value:function(){var t,e,o=this.width/this.height,i=this.root.drawWidth/this.root.drawHeight;return o<i?(e=.75*this.root.drawHeight,t=o*e):(t=.75*this.root.drawWidth,e=t/o),{x:-t/2,y:-e/2,w:t,h:e}}},{key:"_animation",value:function(t,e,o,i){var n=this;if(t||e||o||i){var r=this.maskRect,a=r.x,s=r.y,c=r.w,u=r.h;this._maskRect=this.maskRect,this.maskRect={x:a+t,y:s+e,w:c+o,h:u+i},this.animation=lt({duration:300,timing:"ease-in-out",change:function(r,h){n._maskRect={x:a+h*t,y:s+h*e,w:c+h*o,h:u+h*i},n._draw(n._maskRect,!1,n)},end:function(){n._maskRect&&(n.maskRect=n._maskRect,n._maskRect=void 0)}}).start()}}},{key:"_isHover",value:function(t,e){var o=this.faultTolerant,i=2,n=this.maskRect,r=n.x,a=n.y,s=n.w,c=n.h;return t>=r-o-i&&t<=r+o&&e>=a-o-i&&e<=a+o?"Top Left":t>=r+s-o-i&&t<=r+s+o&&e>=a-o-i&&e<=a+o?"Top Right":t>=r-o-i&&t<=r+o&&e>=a+c-o-i&&e<=a+c+o?"Bottom Left":t>=r+s-o-i&&t<=r+s+o&&e>=a+c-o-i&&e<=a+c+o?"Bottom Right":t>=r&&t<=r+s&&e>=a-o-i&&e<=a+o?"Top":t>=r-o-i&&t<=r+o&&e>=a&&e<=a+c?"Left":t>=r+s-o-i&&t<=r+s+o&&e>=a&&e<=a+c?"Right":t>=r&&t<=r+s&&e>=a+c-o-i&&e<=a+c+o?"Bottom":void 0}},{key:"touchStart",value:function(t){if(this.resize&&null===this.touche){var e=t[0];this.touchePosition=this._isHover(e.x,e.y),this.touchePosition&&(this.root.setPriority(this),this.touche=e,this._draw(this.maskRect,!0,this))}}},{key:"touchEnd",value:function(){null!==this.touche&&this.touchePosition&&(this.touche=null,this.maskRect.w<0&&(this.maskRect.x+=this.maskRect.w,this.maskRect.w*=-1),this.maskRect.h<0&&(this.maskRect.y+=this.maskRect.h,this.maskRect.h*=-1),this.reset(this.maskRect.w,this.maskRect.h),this.root.deletePriority(this.className),this.touchePosition=void 0,this._draw(this._maskRect||this.maskRect,!1,this),this.root.cursor="default")}},{key:"touchMove",value:function(t){var e=this;if(this.resize&&null!==this.touche&&this.touchePosition){var o=this.touche.id,i=t.find((function(t){return t.id===o}));i&&(this.touchePosition.split(" ").forEach((function(t){switch(t){case"Top":e._moveTop(i);break;case"Bottom":e._moveBottom(i);break;case"Left":e._moveLeft(i);break;case"Right":e._moveRight(i);break}})),this.touche=i,this._draw(this.maskRect,!0,this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskMove"}))}else if(this.resize){var n=this._isHover(t[0].x,t[0].y);this.root.cursor=n&&Kt.get(n)||"move"}}},{key:"wheelStart",value:function(){}},{key:"wheelEnd",value:function(){}},{key:"wheelChange",value:function(){}},{key:"_moveTop",value:function(t){var e=t.y-this.touche.y;this.maskRect.y+=e,this.maskRect.h-=e}},{key:"_moveBottom",value:function(t){var e=t.y-this.touche.y;this.maskRect.h+=e}},{key:"_moveLeft",value:function(t){var e=t.x-this.touche.x;this.maskRect.x+=e,this.maskRect.w-=e}},{key:"_moveRight",value:function(t){var e=t.x-this.touche.x;this.maskRect.w+=e}}]),t}();function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ie(t,e,o){return e&&oe(t.prototype,e),o&&oe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function ne(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}function ae(t){var e=ue();return function(){var o,i=he(t);if(e){var n=he(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return se(this,o)}}function se(t,e){if(e&&("object"===te(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},he(t)}var le=function(t){ne(o,t);var e=ae(o);function o(){var t;return ee(this,o),t=e.apply(this,arguments),t.mask=null,t.viewBox="0 0 0 0",t.drawWidth=0,t.drawHeight=0,t.round="M0,150 V+150 a150,150 0 1 0 0,-1",t.rect={x:0,y:0,width:0,height:0},t.border="10, 5",t.thisRound=!1,t.thisResize=!0,t}return ie(o,[{key:"photoRoot",get:function(){var t;return null===(t=this.cutRoot)||void 0===t?void 0:t.photoRoot}},{key:"TLHorn",get:function(){var t=this.rect.x,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t-5," V").concat(e+15," H").concat(t-5," V").concat(e-5," H").concat(t+15," V").concat(e-5," H").concat(t+15," V").concat(e," Z")}},{key:"TRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t+5," V").concat(e+15," H").concat(t+5," V").concat(e-5," H").concat(t-15," V").concat(e-5," H").concat(t-15," V").concat(e," Z")}},{key:"BLHorn",get:function(){var t=this.rect.x,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t-5," V").concat(e-15," H").concat(t-5," V").concat(e+5," H").concat(t+15," V").concat(e+5," H").concat(t+15," V").concat(e," Z")}},{key:"BRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t+5," V").concat(e-15," H").concat(t+5," V").concat(e+5," H").concat(t-15," V").concat(e+5," H").concat(t-15," V").concat(e," Z")}},{key:"watchWidth",value:function(t){this.mask&&this.mask.reset(t,this.height)}},{key:"watchHeight",value:function(t){this.mask&&this.mask.reset(this.width,t)}},{key:"watchIsRound",value:function(t){this.mask&&(this.mask.isRound=t)}},{key:"watchResize",value:function(t){this.mask&&this.mask.setResize(t)}},{key:"watchThisRound",value:function(t){this.mask&&this.mask.isRound!==t&&(this.mask.isRound=t)}},{key:"watchThisResize",value:function(t){this.mask&&this.mask.getResize()!==t&&this.mask.setResize(t)}},{key:"created",value:function(){this.cutRoot=this.getCutRoot()}},{key:"mounted",value:function(){var t=this;this.thisRound=this.isRound,this.thisResize=this.resize,setTimeout((function(){t.viewBox="0 0 ".concat(t.photoRoot.drawWidth," ").concat(t.photoRoot.drawHeight),t.drawWidth=t.photoRoot.drawWidth,t.drawHeight=t.photoRoot.drawHeight,t.mask=new Qt(t.photoRoot,t.width,t.height,t.resize,(function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;t.setPathOption(e,o,i)})),t.mask.isRound=t.isRound}),0)}},{key:"setPathOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;this.thisRound=o.isRound,this.thisResize=o.getResize();var i=t.x,n=t.y,r=t.w,a=t.h;i+=this.photoRoot.core.x,n+=this.photoRoot.core.y,r<0&&(i+=r,r*=-1),a<0&&(n+=a,a*=-1);var s=r/2,c=a/2;this.thisRound?this.round="M".concat(i,",").concat(n+c," a").concat(s,",").concat(c," 0 1 0 0,-1"):this.round="M".concat(i,",").concat(n," H").concat(r+i," V").concat(a+n," H").concat(i," V").concat(n),this.rect={x:i,y:n,width:r,height:a},this.border=e?"10, 0":"10, 5"}}]),o}(s["h"]);Object(a["a"])([Object(s["d"])({type:String,default:"rgba(0,0,0,.5)"})],le.prototype,"color",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"#ff5500"})],le.prototype,"borderColor",void 0),Object(a["a"])([Object(s["d"])({type:Number,default:1})],le.prototype,"width",void 0),Object(a["a"])([Object(s["d"])({type:Number,default:1})],le.prototype,"height",void 0),Object(a["a"])([Object(s["d"])({type:Boolean,default:!1})],le.prototype,"isRound",void 0),Object(a["a"])([Object(s["d"])({type:Boolean,default:!0})],le.prototype,"resize",void 0),Object(a["a"])([Object(s["i"])("width")],le.prototype,"watchWidth",null),Object(a["a"])([Object(s["i"])("height")],le.prototype,"watchHeight",null),Object(a["a"])([Object(s["i"])("isRound")],le.prototype,"watchIsRound",null),Object(a["a"])([Object(s["i"])("resize")],le.prototype,"watchResize",null),Object(a["a"])([Object(s["i"])("thisRound")],le.prototype,"watchThisRound",null),Object(a["a"])([Object(s["i"])("thisResize")],le.prototype,"watchThisResize",null),Object(a["a"])([Object(s["c"])("getCutRoot")],le.prototype,"getCutRoot",void 0),le=Object(a["a"])([Object(s["a"])({name:"VuePictureCutMask"})],le);var fe=le,ve=fe,pe=(o("1f8f"),Object(z["a"])(ve,Ft,Dt,!1,null,"b1f21cd4",null)),de=pe.exports;function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function be(t,e,o){return e&&ye(t.prototype,e),o&&ye(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function we(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Re(t,e)}function Re(t,e){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Re(t,e)}function ke(t){var e=xe();return function(){var o,i=Pe(t);if(e){var n=Pe(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return _e(this,o)}}function _e(t,e){if(e&&("object"===me(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Oe(t)}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}var je=function(t){we(o,t);var e=ke(o);function o(){var t;return ge(this,o),t=e.apply(this,arguments),t.loading=!1,t.hasMenu=!1,t.sliderAngle=0,t.cutSize=null,t.photoRoot=new Q,t}return be(o,[{key:"thickness",get:function(){return void 0===this.menuThickness||this.menuThickness<0?this.hasMenu?120:50:this.menuThickness}},{key:"mainPosition",get:function(){var t=this.thickness+"px",e={top:"0",left:"0",right:"0",bottom:"0"};return"top"===this.menuPosition?e.top=t:"left"===this.menuPosition?e.left=t:"right"===this.menuPosition?e.right=t:e.bottom=t,e}},{key:"memuPosition",get:function(){var t=this.thickness+"px";return"top"===this.menuPosition?{top:"0",left:"0",right:"0",height:t}:"left"===this.menuPosition?{top:"0",left:"0",bottom:"0",width:t}:"right"===this.menuPosition?{top:"0",right:"0",bottom:"0",width:t}:{left:"0",right:"0",bottom:"0",height:t}}},{key:"watchSrc",value:function(t){t&&this.setImg()}},{key:"watchInitAngle",value:function(t){if(void 0!==t){var e=this.photoRoot.getEventList("PhotoMain");if(e){var o=(e.showRect.r+t)%360;this.sliderAngle=o>180?o-360:o<-180?o+360:o}}}},{key:"watchSliderAngle",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}},{key:"created",value:function(){this.watchInitAngle(this.initAngle),this.$slots.menu&&(this.hasMenu=!0),this.photoRoot.onPhotoChange=this.onStateChange}},{key:"mounted",value:function(){var t=this;this.photoRoot.init(this.main,this.magnification),setTimeout((function(){t.setImg()}),0)}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"onStateChange",value:function(t){var e=t.type;if(["imageInit","imageAngle","imageReset","imageScale","maskMove"].indexOf(e)>-1){var o=this.photoRoot.getEventList("PhotoMask");if(o){var i,n,r=o.getCutInfo(this.maxPixel),a=null===r||void 0===r?void 0:r.cutSize;(null===a||void 0===a?void 0:a.w)===(null===(i=this.cutSize)||void 0===i?void 0:i.w)&&(null===a||void 0===a?void 0:a.h)===(null===(n=this.cutSize)||void 0===n?void 0:n.h)||(this.cutSize=a||null)}}}},{key:"getCutRoot",value:function(){return this}},{key:"setImg",value:function(){var t=this.photoRoot.getEventList("PhotoMain"),e=this.src;e&&t&&t.setSrc(e,this.initAngle),void 0!==this.initAngle&&(this.sliderAngle=this.initAngle%180)}},{key:"sureCut",value:function(){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}},{key:"scale",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");null===e||void 0===e||e.scale(t)}}]),o}(s["h"]);Object(a["a"])([Object(s["d"])({type:String,required:!1})],je.prototype,"backgroundColor",void 0),Object(a["a"])([Object(s["d"])({type:Number,default:1.5})],je.prototype,"magnification",void 0),Object(a["a"])([Object(s["d"])({type:String,default:null})],je.prototype,"src",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],je.prototype,"initAngle",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],je.prototype,"maxPixel",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],je.prototype,"encoderOptions",void 0),Object(a["a"])([Object(s["d"])({type:String,required:!1})],je.prototype,"format",void 0),Object(a["a"])([Object(s["d"])({type:Object,default:function(){return{width:1,height:1,isRound:!1,resize:!0}}})],je.prototype,"mskOption",void 0),Object(a["a"])([Object(s["d"])({type:Boolean,required:!1})],je.prototype,"rotateControl",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],je.prototype,"menuThickness",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"bottom"})],je.prototype,"menuPosition",void 0),Object(a["a"])([Object(s["g"])()],je.prototype,"main",void 0),Object(a["a"])([Object(s["i"])("src")],je.prototype,"watchSrc",null),Object(a["a"])([Object(s["i"])("initAngle")],je.prototype,"watchInitAngle",null),Object(a["a"])([Object(s["i"])("sliderAngle")],je.prototype,"watchSliderAngle",null),Object(a["a"])([Object(s["b"])("on-change")],je.prototype,"onChangeEvent",null),Object(a["a"])([Object(s["f"])("getCutRoot")],je.prototype,"getCutRoot",null),je=Object(a["a"])([Object(s["a"])({name:"VuePictureCut",components:{VuePictureCutCanvas:It,VuePictureCutMask:de}})],je);var Ce=je,Me=Ce,Ee=(o("ab39"),Object(z["a"])(Me,H,B,!1,null,null,null)),Se=Ee.exports,Te=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vue-picture-cut-menu dark-theme",class:[["default","dark","gray"].indexOf(t.theme)>-1?t.theme+"-theme":"default-theme"]},[o("div",{staticClass:"vue-picture-cut-menu_slider"},[o("div",{staticClass:"vue-picture-cut-menu_slider-box"},[o("span",[t._v(t._s(t.menuRotateName))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),o("div",{staticClass:"vue-picture-cut-menu_slider-box-bar"},[o("div",{staticClass:"vue-picture-cut-menu_slider-box-button",style:{left:100*t.sliderAngle/361+50+"%"}},[o("div",{staticClass:"vue-picture-cut-menu_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"° ")])])])])]),o("div",{staticClass:"vue-picture-cut-menu_box"},[o("div",{staticClass:"vue-picture-cut-menu_box-content"},[o("div",{staticClass:"vue-picture-cut-menu_box-list",staticStyle:{width:"558px"}},[o("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_flip-v",on:{click:t.setFlipV}}),o("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_flip-h",on:{click:t.setFlipH}}),o("span"),o("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-left",on:{click:function(e){return t.rotate(90,!0)}}}),o("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-right",on:{click:function(e){return t.rotate(-90,!0)}}}),o("span"),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:t.setMaskResize}},[o("div",{staticClass:"__mask"},[t._v(t._s(t.sizeAutoName))])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:t.setMaskSizeToOriginal}},[o("div",{staticClass:"__mask"},[t._v(t._s(t.sizeRawName))])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(1,1)}}},[o("div",{staticClass:"__mask"},[t._v("1:1")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(4,3)}}},[o("div",{staticClass:"__mask _5_4"},[t._v("4:3")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(3,4)}}},[o("div",{staticClass:"__mask _4_5"},[t._v("3:4")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(16,9)}}},[o("div",{staticClass:"__mask _5_4"},[t._v("16:9")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(9,16)}}},[o("div",{staticClass:"__mask _4_5"},[t._v("9:16")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(3,2)}}},[o("div",{staticClass:"__mask _5_4"},[t._v("3:2")])]),o("div",{staticClass:"vue-picture-cut-menu_box-item __mask",on:{click:function(e){return t.setMaskSize(2,3)}}},[o("div",{staticClass:"__mask _4_5"},[t._v("2:3")])])])])]),o("div",{staticClass:"vue-picture-cut-menu_confirm",staticStyle:{"max-width":"558px"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.cancel,expression:"cancel"}],staticClass:"__cancel",on:{click:t.onCancelEvent}},[t._v(t._s(t.cancelName))]),o("div",{staticClass:"__sure",class:{__center:!t.cancel},on:{click:t.sureCut}},[t._v(t._s(t.confirmName))])])])},ze=[];function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Be(t,e,o){return e&&He(t.prototype,e),o&&He(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ve(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}function Ie(t){var e=$e();return function(){var o,i=Je(t);if(e){var n=Je(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return Fe(this,o)}}function Fe(t,e){if(e&&("object"===Ae(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return De(t)}function De(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Je(t){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Je(t)}var We=function(t){Ve(o,t);var e=Ie(o);function o(){var t;return Le(this,o),t=e.apply(this,arguments),t.root=null,t.sliderAngle=0,t}return Be(o,[{key:"photoRoot",get:function(){var t,e;return(null===(t=this.root)||void 0===t?void 0:t.photoRoot)||(null===(e=this.cutRoot)||void 0===e?void 0:e.photoRoot)}},{key:"watchSliderAngle",value:function(t){if(this.photoRoot){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}}},{key:"created",value:function(){this.getCutRoot&&(this.cutRoot=this.getCutRoot())}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"onCancelEvent",value:function(){}},{key:"sureCut",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}}},{key:"setMaskSize",value:function(t,e){if(this.photoRoot){var o=this.photoRoot.getEventList("PhotoMask");o&&(o.reset(t,e),o.setResize(!1))}}},{key:"setMaskSizeToOriginal",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&this.setMaskSize(t.imgRect.w,t.imgRect.h)}}},{key:"setMaskResize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.photoRoot.getEventList("PhotoMask");e&&e.setResize(t)}}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot&&t%360!==0){var o=this.photoRoot.getEventList("PhotoMain");if(o){var i=(o.showRect.r+t)%360;this.sliderAngle=i>180?i-360:i<-180?i+360:i,o.setAngle(o.showRect.r+t,e)}}}},{key:"setFlipV",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipV(1===t.showRect.sV,!0)}}},{key:"setFlipH",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipH(1===t.showRect.sH,!0)}}}]),o}(s["h"]);Object(a["a"])([Object(s["d"])({type:Object,default:null})],We.prototype,"root",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"default"})],We.prototype,"theme",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],We.prototype,"maxPixel",void 0),Object(a["a"])([Object(s["d"])({type:Number,required:!1})],We.prototype,"encoderOptions",void 0),Object(a["a"])([Object(s["d"])({type:String,required:!1})],We.prototype,"format",void 0),Object(a["a"])([Object(s["d"])({type:Boolean,default:!0})],We.prototype,"cancel",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"Cancel"})],We.prototype,"cancelName",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"Ok"})],We.prototype,"confirmName",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"auto"})],We.prototype,"sizeAutoName",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"raw"})],We.prototype,"sizeRawName",void 0),Object(a["a"])([Object(s["d"])({type:String,default:"Rotate"})],We.prototype,"menuRotateName",void 0),Object(a["a"])([Object(s["i"])("sliderAngle")],We.prototype,"watchSliderAngle",null),Object(a["a"])([Object(s["c"])({from:"getCutRoot",default:null})],We.prototype,"getCutRoot",void 0),Object(a["a"])([Object(s["b"])("on-change")],We.prototype,"onChangeEvent",null),Object(a["a"])([Object(s["b"])("on-cancel")],We.prototype,"onCancelEvent",null),We=Object(a["a"])([Object(s["a"])({name:"VuePictureCutMenu"})],We);var Xe=We,qe=Xe,Ye=(o("79d2"),Object(z["a"])(qe,Te,ze,!1,null,null,null)),Ue=Ye.exports,Ze={install:function(t){t.component("vue-picture-cut",Se),t.component("vue-picture-cut-mask",de),t.component("vue-picture-cut-menu",Ue)}},Ge=o("5c96"),Ke=o.n(Ge);o("0fae");i["default"].config.productionTip=!1,i["default"].use(Ze),i["default"].use(Ke.a,{size:"mini"}),new i["default"]({el:"#app",render:function(t){return t(L)}}).$mount("#app")},d690:function(t,e,o){},fbc0:function(t,e,o){}});